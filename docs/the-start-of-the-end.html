<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5.2 The start of the end | An Introduction to R</title>
  <meta name="description" content="A practical introduction to using R for data analysis" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="5.2 The start of the end | An Introduction to R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://nkaza.github.io/intro2Rbook//images/cover_v4.png" />
  <meta property="og:description" content="A practical introduction to using R for data analysis" />
  <meta name="github-repo" content="nkaza/intro2Rbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5.2 The start of the end | An Introduction to R" />
  
  <meta name="twitter:description" content="A practical introduction to using R for data analysis" />
  <meta name="twitter:image" content="https://nkaza.github.io/intro2Rbook//images/cover_v4.png" />

<meta name="author" content="Nikhil Kaza" />


<meta name="date" content="2022-08-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="beginning-at-the-end.html"/>
<link rel="next" href="tips.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-162377463-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-162377463-3');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">An Introduction R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="0.1" data-path="the-aim-of-this-book.html"><a href="the-aim-of-this-book.html"><i class="fa fa-check"></i><b>0.1</b> The aim of this book</a></li>
<li class="chapter" data-level="0.2" data-path="who-is-this-book-for.html"><a href="who-is-this-book-for.html"><i class="fa fa-check"></i><b>0.2</b> Who is this book for?</a></li>
<li class="chapter" data-level="0.3" data-path="how-to-use-this-book.html"><a href="how-to-use-this-book.html"><i class="fa fa-check"></i><b>0.3</b> How to use this book</a></li>
<li class="chapter" data-level="0.4" data-path="book-website.html"><a href="book-website.html"><i class="fa fa-check"></i><b>0.4</b> Book website</a></li>
<li class="chapter" data-level="0.5" data-path="some-r-pointers.html"><a href="some-r-pointers.html"><i class="fa fa-check"></i><b>0.5</b> Some R pointers</a></li>
<li class="chapter" data-level="0.6" data-path="license.html"><a href="license.html"><i class="fa fa-check"></i><b>0.6</b> License</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="chap1.html"><a href="chap1.html"><i class="fa fa-check"></i><b>1</b> Getting started with R and RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="install_r.html"><a href="install_r.html"><i class="fa fa-check"></i><b>1.1</b> Installing R</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="install_r.html"><a href="install_r.html#windows-users"><i class="fa fa-check"></i><b>1.1.1</b> Windows users</a></li>
<li class="chapter" data-level="1.1.2" data-path="install_r.html"><a href="install_r.html#mac-users"><i class="fa fa-check"></i><b>1.1.2</b> Mac users</a></li>
<li class="chapter" data-level="1.1.3" data-path="install_r.html"><a href="install_r.html#linux-users"><i class="fa fa-check"></i><b>1.1.3</b> Linux users</a></li>
<li class="chapter" data-level="1.1.4" data-path="install_r.html"><a href="install_r.html#testing-r"><i class="fa fa-check"></i><b>1.1.4</b> Testing R</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="installing-rstudio.html"><a href="installing-rstudio.html"><i class="fa fa-check"></i><b>1.2</b> Installing RStudio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="installing-rstudio.html"><a href="installing-rstudio.html#windows-and-mac-users"><i class="fa fa-check"></i><b>1.2.1</b> Windows and Mac users</a></li>
<li class="chapter" data-level="1.2.2" data-path="installing-rstudio.html"><a href="installing-rstudio.html#linux-users-1"><i class="fa fa-check"></i><b>1.2.2</b> Linux users</a></li>
<li class="chapter" data-level="1.2.3" data-path="installing-rstudio.html"><a href="installing-rstudio.html#testing-rstudio"><i class="fa fa-check"></i><b>1.2.3</b> Testing RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="rstudio_orient.html"><a href="rstudio_orient.html"><i class="fa fa-check"></i><b>1.3</b> RStudio orientation</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="rstudio_orient.html"><a href="rstudio_orient.html#cons"><i class="fa fa-check"></i><b>1.3.1</b> Console</a></li>
<li class="chapter" data-level="1.3.2" data-path="rstudio_orient.html"><a href="rstudio_orient.html#environmenthistoryconnections"><i class="fa fa-check"></i><b>1.3.2</b> Environment/History/Connections</a></li>
<li class="chapter" data-level="1.3.3" data-path="rstudio_orient.html"><a href="rstudio_orient.html#filesplotspackageshelpviewer"><i class="fa fa-check"></i><b>1.3.3</b> Files/Plots/Packages/Help/Viewer</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="alternatives-to-rstudio.html"><a href="alternatives-to-rstudio.html"><i class="fa fa-check"></i><b>1.4</b> Alternatives to RStudio</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="alternatives-to-rstudio.html"><a href="alternatives-to-rstudio.html#advanced-text-editors"><i class="fa fa-check"></i><b>1.4.1</b> Advanced text editors</a></li>
<li class="chapter" data-level="1.4.2" data-path="alternatives-to-rstudio.html"><a href="alternatives-to-rstudio.html#integrated-developement-environements"><i class="fa fa-check"></i><b>1.4.2</b> Integrated developement environements</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>1.5</b> R packages</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="packages.html"><a href="packages.html#cran_packages"><i class="fa fa-check"></i><b>1.5.1</b> CRAN packages</a></li>
<li class="chapter" data-level="1.5.2" data-path="packages.html"><a href="packages.html#bioconductor-packages"><i class="fa fa-check"></i><b>1.5.2</b> Bioconductor packages</a></li>
<li class="chapter" data-level="1.5.3" data-path="packages.html"><a href="packages.html#github-packages"><i class="fa fa-check"></i><b>1.5.3</b> GitHub packages</a></li>
<li class="chapter" data-level="1.5.4" data-path="packages.html"><a href="packages.html#using-packages"><i class="fa fa-check"></i><b>1.5.4</b> Using packages</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="rsprojs.html"><a href="rsprojs.html"><i class="fa fa-check"></i><b>1.6</b> Projects in RStudio</a></li>
<li class="chapter" data-level="1.7" data-path="work-d.html"><a href="work-d.html"><i class="fa fa-check"></i><b>1.7</b> Working directories</a></li>
<li class="chapter" data-level="1.8" data-path="dir_struct.html"><a href="dir_struct.html"><i class="fa fa-check"></i><b>1.8</b> Directory structure</a></li>
<li class="chapter" data-level="1.9" data-path="file_names.html"><a href="file_names.html"><i class="fa fa-check"></i><b>1.9</b> File names</a></li>
<li class="chapter" data-level="1.10" data-path="proj_doc.html"><a href="proj_doc.html"><i class="fa fa-check"></i><b>1.10</b> Project documentation</a></li>
<li class="chapter" data-level="1.11" data-path="r-style-guide.html"><a href="r-style-guide.html"><i class="fa fa-check"></i><b>1.11</b> R style guide</a></li>
<li class="chapter" data-level="1.12" data-path="backing-up-projects.html"><a href="backing-up-projects.html"><i class="fa fa-check"></i><b>1.12</b> Backing up projects</a></li>
<li class="chapter" data-level="1.13" data-path="citing-r.html"><a href="citing-r.html"><i class="fa fa-check"></i><b>1.13</b> Citing R</a></li>
<li class="chapter" data-level="1.14" data-path="exercise-1.html"><a href="exercise-1.html"><i class="fa fa-check"></i><b>1.14</b> Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basics_r.html"><a href="basics_r.html"><i class="fa fa-check"></i><b>2</b> Some R basics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>2.1</b> Getting started</a></li>
<li class="chapter" data-level="2.2" data-path="objects-in-r.html"><a href="objects-in-r.html"><i class="fa fa-check"></i><b>2.2</b> Objects in R</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="objects-in-r.html"><a href="objects-in-r.html#r_objs"><i class="fa fa-check"></i><b>2.2.1</b> Creating objects</a></li>
<li class="chapter" data-level="2.2.2" data-path="objects-in-r.html"><a href="objects-in-r.html#naming-objects"><i class="fa fa-check"></i><b>2.2.2</b> Naming objects</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="using-functions-in-r.html"><a href="using-functions-in-r.html"><i class="fa fa-check"></i><b>2.3</b> Using functions in R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="using-functions-in-r.html"><a href="using-functions-in-r.html#pipes.-a-better-way"><i class="fa fa-check"></i><b>2.3.1</b> Pipes. A better way!!!!!</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>2.4</b> Working with vectors</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="vectors.html"><a href="vectors.html#extracting-elements"><i class="fa fa-check"></i><b>2.4.1</b> Extracting elements</a></li>
<li class="chapter" data-level="2.4.2" data-path="vectors.html"><a href="vectors.html#replacing-elements"><i class="fa fa-check"></i><b>2.4.2</b> Replacing elements</a></li>
<li class="chapter" data-level="2.4.3" data-path="vectors.html"><a href="vectors.html#vec_ord"><i class="fa fa-check"></i><b>2.4.3</b> Ordering elements</a></li>
<li class="chapter" data-level="2.4.4" data-path="vectors.html"><a href="vectors.html#vectorisation"><i class="fa fa-check"></i><b>2.4.4</b> Vectorisation</a></li>
<li class="chapter" data-level="2.4.5" data-path="vectors.html"><a href="vectors.html#na_vals"><i class="fa fa-check"></i><b>2.4.5</b> Missing data</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="help.html"><a href="help.html"><i class="fa fa-check"></i><b>2.5</b> Getting help</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="help.html"><a href="help.html#r-help"><i class="fa fa-check"></i><b>2.5.1</b> R help</a></li>
<li class="chapter" data-level="2.5.2" data-path="help.html"><a href="help.html#rhelp"><i class="fa fa-check"></i><b>2.5.2</b> Other sources of help</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="saving-stuff-in-r.html"><a href="saving-stuff-in-r.html"><i class="fa fa-check"></i><b>2.6</b> Saving stuff in R</a></li>
<li class="chapter" data-level="2.7" data-path="exercise-2.html"><a href="exercise-2.html"><i class="fa fa-check"></i><b>2.7</b> Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data_r.html"><a href="data_r.html"><i class="fa fa-check"></i><b>3</b> Data in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="basic-data-types.html"><a href="basic-data-types.html"><i class="fa fa-check"></i><b>3.1</b> Basic Data types</a></li>
<li class="chapter" data-level="3.2" data-path="complicated-data-types.html"><a href="complicated-data-types.html"><i class="fa fa-check"></i><b>3.2</b> Complicated Data Types</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="complicated-data-types.html"><a href="complicated-data-types.html#dealing-with-date-and-time"><i class="fa fa-check"></i><b>3.2.1</b> Dealing with Date and Time</a></li>
<li class="chapter" data-level="3.2.2" data-path="complicated-data-types.html"><a href="complicated-data-types.html#factors"><i class="fa fa-check"></i><b>3.2.2</b> Factors</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>3.3</b> Data structures</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-structures.html"><a href="data-structures.html#scal_vecs"><i class="fa fa-check"></i><b>3.3.1</b> Scalars and vectors</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-structures.html"><a href="data-structures.html#mat_array"><i class="fa fa-check"></i><b>3.3.2</b> Matrices and arrays</a></li>
<li class="chapter" data-level="3.3.3" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>3.3.3</b> Lists</a></li>
<li class="chapter" data-level="3.3.4" data-path="data-structures.html"><a href="data-structures.html#df"><i class="fa fa-check"></i><b>3.3.4</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>3.4</b> Importing data</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="importing-data.html"><a href="importing-data.html#saving-files-to-import"><i class="fa fa-check"></i><b>3.4.1</b> Saving files to import</a></li>
<li class="chapter" data-level="3.4.2" data-path="importing-data.html"><a href="importing-data.html#import_fnc"><i class="fa fa-check"></i><b>3.4.2</b> Import functions</a></li>
<li class="chapter" data-level="3.4.3" data-path="importing-data.html"><a href="importing-data.html#common-import-frustrations"><i class="fa fa-check"></i><b>3.4.3</b> Common import frustrations</a></li>
<li class="chapter" data-level="3.4.4" data-path="importing-data.html"><a href="importing-data.html#import_other"><i class="fa fa-check"></i><b>3.4.4</b> Other import options</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="wrangling-data-frames.html"><a href="wrangling-data-frames.html"><i class="fa fa-check"></i><b>3.5</b> Wrangling data frames</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="wrangling-data-frames.html"><a href="wrangling-data-frames.html#positional-indexes"><i class="fa fa-check"></i><b>3.5.1</b> Positional indexes</a></li>
<li class="chapter" data-level="3.5.2" data-path="wrangling-data-frames.html"><a href="wrangling-data-frames.html#logical-indexes"><i class="fa fa-check"></i><b>3.5.2</b> Logical indexes</a></li>
<li class="chapter" data-level="3.5.3" data-path="wrangling-data-frames.html"><a href="wrangling-data-frames.html#adding-columns-and-rows"><i class="fa fa-check"></i><b>3.5.3</b> Adding columns and rows</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="summarising-data-frames.html"><a href="summarising-data-frames.html"><i class="fa fa-check"></i><b>3.6</b> Summarising data frames</a></li>
<li class="chapter" data-level="3.7" data-path="exporting-data.html"><a href="exporting-data.html"><i class="fa fa-check"></i><b>3.7</b> Exporting data</a></li>
<li class="chapter" data-level="3.8" data-path="exercise-3.html"><a href="exercise-3.html"><i class="fa fa-check"></i><b>3.8</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data_tidyverse.html"><a href="data_tidyverse.html"><i class="fa fa-check"></i><b>4</b> Tidyverse</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-frames-tibbles.html"><a href="data-frames-tibbles.html"><i class="fa fa-check"></i><b>4.1</b> Data Frames &amp; Tibbles</a></li>
<li class="chapter" data-level="4.2" data-path="reading-external-data.html"><a href="reading-external-data.html"><i class="fa fa-check"></i><b>4.2</b> Reading external data</a></li>
<li class="chapter" data-level="4.3" data-path="wrangling-data.html"><a href="wrangling-data.html"><i class="fa fa-check"></i><b>4.3</b> Wrangling Data</a></li>
<li class="chapter" data-level="4.4" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>4.4</b> Relational Data</a></li>
<li class="chapter" data-level="4.5" data-path="exercise-4.html"><a href="exercise-4.html"><i class="fa fa-check"></i><b>4.5</b> Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="graphics_r.html"><a href="graphics_r.html"><i class="fa fa-check"></i><b>5</b> Graphics with ggplot</a>
<ul>
<li class="chapter" data-level="5.1" data-path="beginning-at-the-end.html"><a href="beginning-at-the-end.html"><i class="fa fa-check"></i><b>5.1</b> Beginning at the end</a></li>
<li class="chapter" data-level="5.2" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html"><i class="fa fa-check"></i><b>5.2</b> The start of the end</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#the-purest-of-ggplots"><i class="fa fa-check"></i><b>5.2.1</b> The purest of ggplots</a></li>
<li class="chapter" data-level="5.2.2" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#wrapping-grids"><i class="fa fa-check"></i><b>5.2.2</b> Wrapping grids</a></li>
<li class="chapter" data-level="5.2.3" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#plotting-multiple-ggplots"><i class="fa fa-check"></i><b>5.2.3</b> Plotting multiple ggplots</a></li>
<li class="chapter" data-level="5.2.4" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#make-it-your-own"><i class="fa fa-check"></i><b>5.2.4</b> Make it your own</a></li>
<li class="chapter" data-level="5.2.5" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#setting-the-theme"><i class="fa fa-check"></i><b>5.2.5</b> Setting the theme</a></li>
<li class="chapter" data-level="5.2.6" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#prettification"><i class="fa fa-check"></i><b>5.2.6</b> Prettification</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="tips.html"><a href="tips.html"><i class="fa fa-check"></i><b>5.3</b> Tips and tricks</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="tips.html"><a href="tips.html#statistics-layer"><i class="fa fa-check"></i><b>5.3.1</b> Statistics layer</a></li>
<li class="chapter" data-level="5.3.2" data-path="tips.html"><a href="tips.html#axis-limits-and-zooms"><i class="fa fa-check"></i><b>5.3.2</b> Axis limits and zooms</a></li>
<li class="chapter" data-level="5.3.3" data-path="tips.html"><a href="tips.html#layering-layers"><i class="fa fa-check"></i><b>5.3.3</b> Layering layers</a></li>
<li class="chapter" data-level="5.3.4" data-path="tips.html"><a href="tips.html#continuous-colours"><i class="fa fa-check"></i><b>5.3.4</b> Continuous colours</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="exercise-5.html"><a href="exercise-5.html"><i class="fa fa-check"></i><b>5.4</b> Exercise 5</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="prog_r.html"><a href="prog_r.html"><i class="fa fa-check"></i><b>6</b> Programming in R</a>
<ul>
<li class="chapter" data-level="6.1" data-path="functions-in-r.html"><a href="functions-in-r.html"><i class="fa fa-check"></i><b>6.1</b> Functions in R</a></li>
<li class="chapter" data-level="6.2" data-path="conditional-statements.html"><a href="conditional-statements.html"><i class="fa fa-check"></i><b>6.2</b> Conditional statements</a></li>
<li class="chapter" data-level="6.3" data-path="combining-logical-operators.html"><a href="combining-logical-operators.html"><i class="fa fa-check"></i><b>6.3</b> Combining logical operators</a></li>
<li class="chapter" data-level="6.4" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>6.4</b> Loops</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="loops.html"><a href="loops.html#for-loop"><i class="fa fa-check"></i><b>6.4.1</b> For loop</a></li>
<li class="chapter" data-level="6.4.2" data-path="loops.html"><a href="loops.html#while-loop"><i class="fa fa-check"></i><b>6.4.2</b> While loop</a></li>
<li class="chapter" data-level="6.4.3" data-path="loops.html"><a href="loops.html#when-to-use-a-loop"><i class="fa fa-check"></i><b>6.4.3</b> When to use a loop?</a></li>
<li class="chapter" data-level="6.4.4" data-path="loops.html"><a href="loops.html#if-not-loops-then-what"><i class="fa fa-check"></i><b>6.4.4</b> If not loops, then what?</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="exercise-6.html"><a href="exercise-6.html"><i class="fa fa-check"></i><b>6.5</b> Exercise 6</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="install-rm.html"><a href="install-rm.html"><i class="fa fa-check"></i><b>A</b> Installing R Markdown</a>
<ul>
<li class="chapter" data-level="A.1" data-path="ms-windows.html"><a href="ms-windows.html"><i class="fa fa-check"></i><b>A.1</b> MS Windows</a></li>
<li class="chapter" data-level="A.2" data-path="mac-osx.html"><a href="mac-osx.html"><i class="fa fa-check"></i><b>A.2</b> Mac OSX</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="rmarkdown_r.html"><a href="rmarkdown_r.html"><i class="fa fa-check"></i><b>B</b> Reproducible reports with R markdown</a>
<ul>
<li class="chapter" data-level="B.1" data-path="what-is-r-markdown.html"><a href="what-is-r-markdown.html"><i class="fa fa-check"></i><b>B.1</b> What is R markdown?</a></li>
<li class="chapter" data-level="B.2" data-path="why-use-r-markdown.html"><a href="why-use-r-markdown.html"><i class="fa fa-check"></i><b>B.2</b> Why use R markdown?</a></li>
<li class="chapter" data-level="B.3" data-path="get-started-with-r-markdown.html"><a href="get-started-with-r-markdown.html"><i class="fa fa-check"></i><b>B.3</b> Get started with R markdown</a></li>
<li class="chapter" data-level="B.4" data-path="new_rm.html"><a href="new_rm.html"><i class="fa fa-check"></i><b>B.4</b> Create an R markdown document</a></li>
<li class="chapter" data-level="B.5" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html"><i class="fa fa-check"></i><b>B.5</b> R markdown anatomy</a>
<ul>
<li class="chapter" data-level="B.5.1" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#yaml-header"><i class="fa fa-check"></i><b>B.5.1</b> YAML header</a></li>
<li class="chapter" data-level="B.5.2" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#formatted-text"><i class="fa fa-check"></i><b>B.5.2</b> Formatted text</a></li>
<li class="chapter" data-level="B.5.3" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#code_chunks"><i class="fa fa-check"></i><b>B.5.3</b> Code chunks</a></li>
<li class="chapter" data-level="B.5.4" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#adding-figures"><i class="fa fa-check"></i><b>B.5.4</b> Adding figures</a></li>
<li class="chapter" data-level="B.5.5" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#adding-tables"><i class="fa fa-check"></i><b>B.5.5</b> Adding tables</a></li>
<li class="chapter" data-level="B.5.6" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#inline-r-code"><i class="fa fa-check"></i><b>B.5.6</b> Inline R code</a></li>
</ul></li>
<li class="chapter" data-level="B.6" data-path="tips_tricks.html"><a href="tips_tricks.html"><i class="fa fa-check"></i><b>B.6</b> Some tips and tricks</a></li>
<li class="chapter" data-level="B.7" data-path="further-information.html"><a href="further-information.html"><i class="fa fa-check"></i><b>B.7</b> Further Information</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="github_r.html"><a href="github_r.html"><i class="fa fa-check"></i><b>C</b> Version control with Git and GitHub</a>
<ul>
<li class="chapter" data-level="C.1" data-path="what-is-version-control.html"><a href="what-is-version-control.html"><i class="fa fa-check"></i><b>C.1</b> What is version control?</a></li>
<li class="chapter" data-level="C.2" data-path="why-use-version-control.html"><a href="why-use-version-control.html"><i class="fa fa-check"></i><b>C.2</b> Why use version control?</a></li>
<li class="chapter" data-level="C.3" data-path="what-is-git-and-github.html"><a href="what-is-git-and-github.html"><i class="fa fa-check"></i><b>C.3</b> What is Git and GitHub?</a></li>
<li class="chapter" data-level="C.4" data-path="setup_git.html"><a href="setup_git.html"><i class="fa fa-check"></i><b>C.4</b> Getting started</a>
<ul>
<li class="chapter" data-level="C.4.1" data-path="setup_git.html"><a href="setup_git.html#install-git"><i class="fa fa-check"></i><b>C.4.1</b> Install Git</a></li>
<li class="chapter" data-level="C.4.2" data-path="setup_git.html"><a href="setup_git.html#configure-git"><i class="fa fa-check"></i><b>C.4.2</b> Configure Git</a></li>
<li class="chapter" data-level="C.4.3" data-path="setup_git.html"><a href="setup_git.html#rs_config"><i class="fa fa-check"></i><b>C.4.3</b> Configure RStudio</a></li>
<li class="chapter" data-level="C.4.4" data-path="setup_git.html"><a href="setup_git.html#register-a-github-account"><i class="fa fa-check"></i><b>C.4.4</b> Register a GitHub account</a></li>
</ul></li>
<li class="chapter" data-level="C.5" data-path="setting-up-a-project-in-rstudio.html"><a href="setting-up-a-project-in-rstudio.html"><i class="fa fa-check"></i><b>C.5</b> Setting up a project in RStudio</a>
<ul>
<li class="chapter" data-level="C.5.1" data-path="setting-up-a-project-in-rstudio.html"><a href="setting-up-a-project-in-rstudio.html#opt1"><i class="fa fa-check"></i><b>C.5.1</b> Option 1 - GitHub first</a></li>
<li class="chapter" data-level="C.5.2" data-path="setting-up-a-project-in-rstudio.html"><a href="setting-up-a-project-in-rstudio.html#opt2"><i class="fa fa-check"></i><b>C.5.2</b> Option 2 - RStudio first</a></li>
</ul></li>
<li class="chapter" data-level="C.6" data-path="use_git.html"><a href="use_git.html"><i class="fa fa-check"></i><b>C.6</b> Using Git</a>
<ul>
<li class="chapter" data-level="C.6.1" data-path="use_git.html"><a href="use_git.html#tracking-changes"><i class="fa fa-check"></i><b>C.6.1</b> Tracking changes</a></li>
<li class="chapter" data-level="C.6.2" data-path="use_git.html"><a href="use_git.html#commit-history"><i class="fa fa-check"></i><b>C.6.2</b> Commit history</a></li>
<li class="chapter" data-level="C.6.3" data-path="use_git.html"><a href="use_git.html#undo"><i class="fa fa-check"></i><b>C.6.3</b> Reverting changes</a></li>
<li class="chapter" data-level="C.6.4" data-path="use_git.html"><a href="use_git.html#collab"><i class="fa fa-check"></i><b>C.6.4</b> Collaborate with Git</a></li>
<li class="chapter" data-level="C.6.5" data-path="use_git.html"><a href="use_git.html#git-tips"><i class="fa fa-check"></i><b>C.6.5</b> Git tips</a></li>
</ul></li>
<li class="chapter" data-level="C.7" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>C.7</b> Further resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="the-start-of-the-end" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> The start of the end<a href="the-start-of-the-end.html#the-start-of-the-end" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The first step in producing a plot with <code>ggplot()</code> is the easiest! We just need to install and then make the package avaialble. Use the skills you learnt in <a href="packages.html#packages">Chapter 1</a> to install and load the package. Note that although most people refer to the package as <code>ggplot</code>, it’s proper name is <code>ggplot2</code>.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="the-start-of-the-end.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb159-2"><a href="the-start-of-the-end.html#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<p>With that taken care of, let’s make our first <code>ggplot</code>!</p>
<div id="the-purest-of-ggplots" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> The purest of ggplots<a href="the-start-of-the-end.html#the-purest-of-ggplots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When we run our ‘in person’ R courses that accompany this book, we often ask our students to name all of the functions they have either learnt during the course, have heard of previously, or have used before (we call it R bingo!). At this point in the course, the students have not yet learnt about <code>ggplot2</code>, but never-the-less one year a student suggested the function <code>ggplot()</code>. When asked what the <code>ggplot()</code> function does, they joked that it obviously makes a <code>ggplot.</code> This makes intuitive sense, so let’s make a <code>ggplot</code> now:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="the-start-of-the-end.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()</span></code></pre></div>
<p><img src="Rbook_files/figure-html/pure-ggplot-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p>And here we have it. A fully formed, perfect <code>ggplot</code>. We may have a small issue though. Some puritan data visualisers/plotists/figurines make the claim that figures should include some form of information beyond a light grey background. As loathe as we are to agree with purists, we’ll do so here. We really should include some information, but to do so, we need data.</p>
<p>We’ll keep using the <code>nola_str_tib</code> dataset that you’ve used in <a href="data_r.html#data_r">Chapter 3</a>. Let’s have a quick reminder of what the structure of the data looks like. For the sake of simplicity, I will drop the observations that are duplicate and are thus noted in the <code>Current Status</code>.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="the-start-of-the-end.html#cb161-1" aria-hidden="true" tabindex="-1"></a>nola_str_tib <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/NOLA_STR.csv&quot;</span>,</span>
<span id="cb161-2"><a href="the-start-of-the-end.html#cb161-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_types =</span> <span class="fu">cols</span>(</span>
<span id="cb161-3"><a href="the-start-of-the-end.html#cb161-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Permit Number</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb161-4"><a href="the-start-of-the-end.html#cb161-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Address</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb161-5"><a href="the-start-of-the-end.html#cb161-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">col_factor</span>(),</span>
<span id="cb161-6"><a href="the-start-of-the-end.html#cb161-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">col_factor</span>(),</span>
<span id="cb161-7"><a href="the-start-of-the-end.html#cb161-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Application Date</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">col_date</span>(<span class="at">format =</span> <span class="st">&quot;%m/%d/%y&quot;</span>),</span>
<span id="cb161-8"><a href="the-start-of-the-end.html#cb161-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Issue_Date</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">col_date</span>(<span class="at">format =</span> <span class="st">&quot;%m/%d/%y&quot;</span>)</span>
<span id="cb161-9"><a href="the-start-of-the-end.html#cb161-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb161-10"><a href="the-start-of-the-end.html#cb161-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb161-11"><a href="the-start-of-the-end.html#cb161-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-12"><a href="the-start-of-the-end.html#cb161-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-13"><a href="the-start-of-the-end.html#cb161-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb161-14"><a href="the-start-of-the-end.html#cb161-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-15"><a href="the-start-of-the-end.html#cb161-15" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(nola_str_tib)</span>
<span id="cb161-16"><a href="the-start-of-the-end.html#cb161-16" aria-hidden="true" tabindex="-1"></a><span class="do">## spec_tbl_df [89 × 12] (S3: spec_tbl_df/tbl_df/tbl/data.frame)</span></span>
<span id="cb161-17"><a href="the-start-of-the-end.html#cb161-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ Permit Number        : chr [1:89] NA NA NA NA ...</span></span>
<span id="cb161-18"><a href="the-start-of-the-end.html#cb161-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ Address              : chr [1:89] &quot;1717 Robert C Blakes, SR Dr&quot; &quot;1006 Race St&quot; &quot;2634 Louisiana Ave&quot; &quot;3323 Rosalie Aly&quot; ...</span></span>
<span id="cb161-19"><a href="the-start-of-the-end.html#cb161-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ Permit Type          : Factor w/ 3 levels &quot;Short Term Rental Commercial Owner&quot;,..: 1 1 1 2 2 2 3 2 2 2 ...</span></span>
<span id="cb161-20"><a href="the-start-of-the-end.html#cb161-20" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ Residential Subtype  : chr [1:89] &quot;N/A&quot; &quot;N/A&quot; &quot;N/A&quot; &quot;Residential Partial Unit&quot; ...</span></span>
<span id="cb161-21"><a href="the-start-of-the-end.html#cb161-21" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ Current Status       : Factor w/ 3 levels &quot;Pending&quot;,&quot;Issued&quot;,..: 1 1 1 1 1 2 1 1 1 1 ...</span></span>
<span id="cb161-22"><a href="the-start-of-the-end.html#cb161-22" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ Expiration Date      : chr [1:89] NA NA NA NA ...</span></span>
<span id="cb161-23"><a href="the-start-of-the-end.html#cb161-23" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ Bedroom Limit        : num [1:89] 5 5 3 1 3 1 2 2 1 2 ...</span></span>
<span id="cb161-24"><a href="the-start-of-the-end.html#cb161-24" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ Guest Occupancy Limit: num [1:89] 10 10 6 2 6 2 4 4 2 4 ...</span></span>
<span id="cb161-25"><a href="the-start-of-the-end.html#cb161-25" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ Operator Name        : chr [1:89] &quot;Melissa Taranto&quot; &quot;Michael Heyne&quot; &quot;Michael Heyne&quot; &quot;Caroline Stas&quot; ...</span></span>
<span id="cb161-26"><a href="the-start-of-the-end.html#cb161-26" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ License Holder Name  : chr [1:89] &quot;Scott Taranto&quot; &quot;Boutique Hospitality&quot; &quot;Resonance Home LLC&quot; &quot;Caroline Stas&quot; ...</span></span>
<span id="cb161-27"><a href="the-start-of-the-end.html#cb161-27" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ Application Date     : Date[1:89], format: &quot;2022-08-09&quot; &quot;2022-08-09&quot; ...</span></span>
<span id="cb161-28"><a href="the-start-of-the-end.html#cb161-28" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ Issue_Date           : Date[1:89], format: NA NA ...</span></span>
<span id="cb161-29"><a href="the-start-of-the-end.html#cb161-29" aria-hidden="true" tabindex="-1"></a><span class="do">##  - attr(*, &quot;spec&quot;)=</span></span>
<span id="cb161-30"><a href="the-start-of-the-end.html#cb161-30" aria-hidden="true" tabindex="-1"></a><span class="do">##   .. cols(</span></span>
<span id="cb161-31"><a href="the-start-of-the-end.html#cb161-31" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..   `Permit Number` = col_character(),</span></span>
<span id="cb161-32"><a href="the-start-of-the-end.html#cb161-32" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..   Address = col_character(),</span></span>
<span id="cb161-33"><a href="the-start-of-the-end.html#cb161-33" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..   `Permit Type` = col_factor(levels = NULL, ordered = FALSE, include_na = FALSE),</span></span>
<span id="cb161-34"><a href="the-start-of-the-end.html#cb161-34" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..   `Residential Subtype` = col_character(),</span></span>
<span id="cb161-35"><a href="the-start-of-the-end.html#cb161-35" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..   `Current Status` = col_factor(levels = NULL, ordered = FALSE, include_na = FALSE),</span></span>
<span id="cb161-36"><a href="the-start-of-the-end.html#cb161-36" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..   `Expiration Date` = col_character(),</span></span>
<span id="cb161-37"><a href="the-start-of-the-end.html#cb161-37" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..   `Bedroom Limit` = col_double(),</span></span>
<span id="cb161-38"><a href="the-start-of-the-end.html#cb161-38" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..   `Guest Occupancy Limit` = col_double(),</span></span>
<span id="cb161-39"><a href="the-start-of-the-end.html#cb161-39" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..   `Operator Name` = col_character(),</span></span>
<span id="cb161-40"><a href="the-start-of-the-end.html#cb161-40" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..   `License Holder Name` = col_character(),</span></span>
<span id="cb161-41"><a href="the-start-of-the-end.html#cb161-41" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..   `Application Date` = col_date(format = &quot;%m/%d/%y&quot;),</span></span>
<span id="cb161-42"><a href="the-start-of-the-end.html#cb161-42" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..   Issue_Date = col_date(format = &quot;%m/%d/%y&quot;)</span></span>
<span id="cb161-43"><a href="the-start-of-the-end.html#cb161-43" aria-hidden="true" tabindex="-1"></a><span class="do">##   .. )</span></span>
<span id="cb161-44"><a href="the-start-of-the-end.html#cb161-44" aria-hidden="true" tabindex="-1"></a><span class="do">##  - attr(*, &quot;problems&quot;)=&lt;externalptr&gt;</span></span>
<span id="cb161-45"><a href="the-start-of-the-end.html#cb161-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-46"><a href="the-start-of-the-end.html#cb161-46" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> nola_str_tib <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">!=</span> <span class="st">&quot;Duplicate&quot;</span>)</span></code></pre></div>
<p>We know from the “final figure” that we want the variable <code>Bedroom Limit</code> on the y axis (response/dependent variable) and <code>Guest Occupancy Limit</code> on the x axis (explanatory/independent variable). To do this in <code>ggplot2</code> we need to make use of the <code>aes()</code> function and also add a <code>data =</code> argument. <code>aes</code> is short for aesthetics, and it’s the function we use to specify what we want displayed in the figure.</p>
<p>If we did not include the <code>aes()</code> function, then the <code>x =</code> and <code>y =</code> arguments would produce an error saying that the object was not found. A good rule to keep in mind when using <code>ggplot2</code> is that the variables which we want displayed on the figure must be included in <code>aes()</code> function via the <code>mapping =</code> argument (corresponding to the mapping layer from Figure. 4.1).</p>
<p>All features in the figure which alter the displayed information, not based on a variable in our dataset (e.g. increasing the size of points to an arbitrary value), is included outside of the <code>aes()</code> function. Don’t worry if that doesn’t make sense for now, we’ll come back to this later.</p>
<p>Let’s update our code to include the ‘data’ and ‘mapping’ layers (indicated by the grey Data and mustard Mapping <em>layer bubbles</em> which will precede relevant code chunks):</p>
<p><img src="images/data_mapping.png" width="15%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="the-start-of-the-end.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Including aesthetics for x and y axes as well as specifying the dataset</span></span>
<span id="cb162-2"><a href="the-start-of-the-end.html#cb162-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>), <span class="at">data =</span> df)</span></code></pre></div>
<p><img src="Rbook_files/figure-html/ggplot-with-xy-axis-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>That’s already much better. At least it’s no longer a blank grey canvas. We’ve now told <code>ggplot2</code> what we want as our x and y axes as well as where to find that data. But what’s missing here is where we tell <code>ggplot2</code> <em>how</em> to display that data. This is now the time to introduce you to ‘geoms’ or geometry layers.</p>
<p>Geometries are the way that <code>ggplot2</code> displays information. For instance <code>geom_point()</code> tells <code>ggplot2</code> that you want the information to be displayed as points (making scatterplots possible for example). Given that the “final figure” uses points, this is clearly the appropriate geom to use here. But since I know that lots of values are repeated, I want to jitter the points to avoid overplotting.</p>
<p>Before we can do that, we need to talk about the coding structure used by <code>ggplot2</code>. The analogy that we and many others use is to say that making a figure in <code>ggplot2</code> is much like painting. What we’ve did in the above code was to make our “canvas”. Now we are going to add sequential layers to that painting, increasing the complexity and detail over time. Each time we want to include a new layer we need to end a preceding layer with a <code>+</code> at the end to tell <code>ggplot2</code> that there are additional layers coming.</p>
<p>Let’s add (<code>+</code>) a new geometry layer now:</p>
<p><img src="images/geoms.png" width="7.5%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="the-start-of-the-end.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb163-2"><a href="the-start-of-the-end.html#cb163-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="co"># Adding a geom to display data as point data</span></span></code></pre></div>
<p><img src="Rbook_files/figure-html/ggplot-with-geom_point-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>When you first start using <code>ggplot2</code> there are three crucial layers that require your input. You can safely ignore the other layers initially as they all receive sensible (if sometimes ugly) defaults. The three crucial layers are:</p>
<p> </p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-114"></span>
<img src="images/data.png" alt="Data - the information we want to plot" width="7.5%" />
<p class="caption">
Figure 5.2: Data - the information we want to plot
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-115"></span>
<img src="images/mapping.png" alt="Mapping - which variables we want displayed and where" width="7.5%" />
<p class="caption">
Figure 5.3: Mapping - which variables we want displayed and where
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-116"></span>
<img src="images/geoms.png" alt="Geometry - how we want that data displayed" width="7.5%" />
<p class="caption">
Figure 5.4: Geometry - how we want that data displayed
</p>
</div>
<p> </p>
<p>Given that ‘data’ only requires us to specify the dataset we want to use, it is trivially easy to complete. ‘Mapping’ only requires you to specify what variables in the data to use, often just the x- and y-axes (specified using <code>aes()</code>). Lastly, ‘geometry’ is where we choose how we want the data to be visualised.</p>
<p>With just these three fundamentals, you will be able to produce a large variety of plots (see later in this Chapter for a <a href="#bestiary">bestiary</a> of plots).</p>
<p>If what we wanted was a quick and dirty figure to get a grasp of the trend in the data we can stop here. From the scatterplot that we’ve produced, we can see that <code>Bedroom Limit</code> looks like it’s increasing with <code>Guest Occupancy Limit</code> in a linear fashion. So long as this answers the question we were asking from these data, we have a figure that is fit for purpose. However, for showing to other people we might want something a bit more developed. We can include lines using a geom. If you have a quick look through the available geoms [here][geoms], <code>geom_smooth</code> with linear smoothing is appropriate.</p>
<p><img src="images/geoms.png" width="7.5%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="the-start-of-the-end.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb164-2"><a href="the-start-of-the-end.html#cb164-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb164-3"><a href="the-start-of-the-end.html#cb164-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="co"># Add geom_line</span></span></code></pre></div>
<p><img src="Rbook_files/figure-html/geom_line-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p><img src="images/geoms_statistics.png" width="15%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>We need to alter <code>geom_smooth()</code> so that it draws lines for each combination of <code>Residential Subtype</code>, <code>Permit Type</code> and <code>Current Status</code>. Getting <code>ggplot2</code> to do that is pretty straightforward. First , we can use the <code>colour =</code> argument within <code>aes()</code> (remember whatever we include in <code>aes()</code> will be something displayed in the figure) to tell <code>ggplot2</code> to draw a different coloured lines depending on the <code>Permit Type</code> variable. Keep in mind that we have no variable in our dataset called “Permit Type_colour”, so <code>ggplot2</code> is taking care of that for us here and assigning a colour to each unique Permit Type level.</p>
<p>An aside: <code>ggplot2</code> was written with both UK English and American English in mind, so both <code>colour</code> and <code>color</code> spellings work in <code>ggplot2</code>.</p>
<p><img src="images/mapping_scales.png" width="15%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="the-start-of-the-end.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb165-2"><a href="the-start-of-the-end.html#cb165-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb165-3"><a href="the-start-of-the-end.html#cb165-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<p><img src="Rbook_files/figure-html/geom_smooth-colour-lm-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>We’re getting closer, especially since <code>ggplot2</code> has automatically created a legend for us. At this point it’s a good time to talk about where to include information - whether to include it within a geom or in the main call to <code>ggplot()</code>. When we include information such as <code>data =</code> and <code>aes()</code> in <code>ggplot()</code> we are setting those as the default, universal values which all subsequent geoms use. Whereas if we were to include that information within a geom, only that geom would use that specific information. In this case, we can easily move the information around and get exactly the same figure.</p>
<p><img src="images/data_mapping.png" width="15%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="the-start-of-the-end.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb166-2"><a href="the-start-of-the-end.html#cb166-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Moved aes() and data into geoms</span></span>
<span id="cb166-3"><a href="the-start-of-the-end.html#cb166-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb166-4"><a href="the-start-of-the-end.html#cb166-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>),</span>
<span id="cb166-5"><a href="the-start-of-the-end.html#cb166-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> df, <span class="at">method =</span> <span class="st">&quot;lm&quot;</span></span>
<span id="cb166-6"><a href="the-start-of-the-end.html#cb166-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="Rbook_files/figure-html/universal-vrs-geom-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>Doing so we get exactly the same figure. This ability to move information between the main <code>ggplot()</code> call or in specific geoms is surprisingly powerful (although sometime confusing!). It can allow different geoms to display different (albeit similar) information (see more on this later).</p>
<p>For this worked example, we’ll move the same information back to the universal <code>ggplot()</code>, but we’ll also move <code>colour = nitrogen</code> into <code>ggplot()</code> so that we can have the points coloured according to nitrogen concentration as well.</p>
<p><img src="images/data_mapping.png" width="15%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="the-start-of-the-end.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb167-2"><a href="the-start-of-the-end.html#cb167-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Moved aes() and data into ggplot</span></span>
<span id="cb167-3"><a href="the-start-of-the-end.html#cb167-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb167-4"><a href="the-start-of-the-end.html#cb167-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<p><img src="Rbook_files/figure-html/universal-colours-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>This figure is now what we would consider to be the typical <code>ggplot2</code> figure (once you know to look for it, you’ll see it everywhere). We have specified some information, with only a few lines of code, yet we have something that looks quite attractive. While it’s not yet the “final figure” it’s perfectly suited for displaying the information we need from these data. You have now created your first “pure” <code>ggplot</code> using only the ‘data’, ‘mapping’ and ‘geom’ layers (as well as others indirectly).</p>
<p>Let’s keep going as we’re aiming for something a bit more “sophisticated”.</p>
</div>
<div id="wrapping-grids" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Wrapping grids<a href="the-start-of-the-end.html#wrapping-grids" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Having made our “pure” <code>ggplot</code>, the next big obstacle we’re going to tackle is the grid like layout of the “final figure” where our main figure has been split according to the <code>treat</code> and <code>block</code> variables, with new trends shown for each combination.</p>
<p>Each of these panels (technically “multiples”) are a great way to help other people understand what’s going on in the data. This is especially true with large datasets which can obscure subtle trends simply because so much data is overlaid on top of each other. When we split a single figure into multiples, the same axes are used for all multiples which serve to highlight shifts in the data (data in some multiples may have inherently higher or lower values for instance).</p>
<p><code>ggplot2</code> includes options for specifying the layout of plots using the ‘facets’ layer. We’ll start off by using <code>facet_wrap()</code> to show what this does. For <code>facet_wrap()</code> to work we need to specify a formula for how the facets will be defined (see <code>?facet_wrap</code> for more details and also how to define facets without using a formula). In our example we want to use the factor <code>treat</code> to determine the layout so our formula would look like <code>~ treat</code>. You can read <code>~ treat</code> as saying “according to treatment”. Let’s see how it works:</p>
<p><img src="images/facets.png" width="7.5%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="the-start-of-the-end.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb168-2"><a href="the-start-of-the-end.html#cb168-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb168-3"><a href="the-start-of-the-end.html#cb168-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb168-4"><a href="the-start-of-the-end.html#cb168-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span><span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>)</span></code></pre></div>
<p><img src="Rbook_files/figure-html/facet_wrap-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>That’s pretty good. But we want the combination of <code>Residential Subtype</code> and <code>Current Status</code>.</p>
<p>While this looks pretty good, we are still missing information showing any potential effect of the different blocks. Given that <code>facet_wrap()</code> can use a formula, maybe we could simply include <code>block</code> in the formula? Remember that the <code>block</code> variable refers to the region in the greenhouse where the plants were grown. Let’s try it and see what happens.</p>
<p><img src="images/facets.png" width="7.5%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="the-start-of-the-end.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb169-2"><a href="the-start-of-the-end.html#cb169-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb169-3"><a href="the-start-of-the-end.html#cb169-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb169-4"><a href="the-start-of-the-end.html#cb169-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> <span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>)</span></code></pre></div>
<p><img src="Rbook_files/figure-html/facet_wrap-formula-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>This facet layout is almost exactly what we want. Close but no cigar. In this case we actually want to be using <code>facet_grid()</code>, an alternative to <code>facet_wrap()</code>, which should put us back on track to make the “final figure”.</p>
<p><em>Play around</em>: Try changing the formula to see what happens.</p>
<p>Let’s try using <code>facet_grid</code> instead of <code>facet_wrap</code> to produce the following plot.</p>
<p> </p>
<p><img src="images/facets.png" width="7.5%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="the-start-of-the-end.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb170-2"><a href="the-start-of-the-end.html#cb170-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb170-3"><a href="the-start-of-the-end.html#cb170-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb170-4"><a href="the-start-of-the-end.html#cb170-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>)</span></code></pre></div>
<p><img src="Rbook_files/figure-html/facet_grid-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>And we’re there. Although the styling is not the same as the “final figure” this is showing the same core fundamental information.The rest is about adjusting the labels, spacing, legend positions etc. Those will be covered later.</p>
</div>
<div id="plotting-multiple-ggplots" class="section level3 hasAnchor" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Plotting multiple ggplots<a href="the-start-of-the-end.html#plotting-multiple-ggplots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>While we’ve made multiples of the same figure, what if we wanted to take two completely different figures and plot them together in the same frame? As a demonstration, let’s plot the last figure we made and the “final figure” shown at the start of this chapter one on top of the other to see how they compare. To do this we are going to use a package called <code>patchwork</code>. First you will need to install and make the <code>patchwork</code> package available.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="the-start-of-the-end.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;patchwork&quot;</span>)</span>
<span id="cb171-2"><a href="the-start-of-the-end.html#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span></code></pre></div>
<p>An important note: For those who have used base R to produce their figures and are familiar with using <code>par(mfrow = c(2,2))</code> (which allows plotting of four figures in two rows and two columns) be aware that this does not work for <code>ggplot2</code> objects. Instead you will need to use either the <code>patchwork</code> package or alternative packages such as <code>gridArrange</code> or <code>cowplot</code> or covert the <code>ggplot2</code> objects to grobs.</p>
<p>To plot both of the plots together we need to go back to our previous code and do something clever. We need to assign each figure to a separate object and then use these objects when we use <code>patchwork</code>. For instance, we can assigned our “final figure” plot to an object called <code>final_figure</code> (we’re not very imaginative!), you haven’t see the code yet so you’ll just have to take our word for it!</p>
<p>Let’s remind ourselves of the final figure.</p>
<p> </p>
<p><img src="Rbook_files/figure-html/calling-figure-name-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>We’ll now assign the code we wrote when creating our previous plot to an object called <code>rbook_figure</code>:</p>
<p> </p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="the-start-of-the-end.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Naming our figure object</span></span>
<span id="cb172-2"><a href="the-start-of-the-end.html#cb172-2" aria-hidden="true" tabindex="-1"></a>rbook_figure <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb172-3"><a href="the-start-of-the-end.html#cb172-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb172-4"><a href="the-start-of-the-end.html#cb172-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb172-5"><a href="the-start-of-the-end.html#cb172-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>)</span></code></pre></div>
<p> </p>
<p>Now when the code is run, the figure won’t be shown immediately. To show the figure we need to type the name of the object. We’ll do this at the same time as showing you how <code>patchwork</code> works.</p>
<p>An old headache when using <code>ggplot2</code> was that it could be difficult to create a nested figure (different plots, or “multiples”, all part of the same dataset). <code>patchwork</code> resolves this problem very elegantly and simply. We have two immediate and simple options with patchwork; arrange figures on top of each other (specified with a <code>/</code>) or arrange figures side-by-side (specified with either a <code>+</code> or a <code>|</code>). Let’s try to plot both figures, one on top of the other.</p>
<p> </p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="the-start-of-the-end.html#cb173-1" aria-hidden="true" tabindex="-1"></a>rbook_figure <span class="sc">/</span> final_figure</span></code></pre></div>
<p><img src="Rbook_files/figure-html/side-by-side-patchwork-1.png" width="85%" style="display: block; margin: auto;" /></p>
<p> </p>
<p><em>Play around</em>: Try to create a side-by-side version of the above figure (hint: try the other operators).</p>
<p>We can take this one step further and assign nested <code>patchwork</code> figures to an object and use this in turn to create labels for individuals figures.</p>
<p> </p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="the-start-of-the-end.html#cb174-1" aria-hidden="true" tabindex="-1"></a>nested_compare <span class="ot">&lt;-</span> rbook_figure <span class="sc">/</span> final_figure</span>
<span id="cb174-2"><a href="the-start-of-the-end.html#cb174-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-3"><a href="the-start-of-the-end.html#cb174-3" aria-hidden="true" tabindex="-1"></a>nested_compare <span class="sc">+</span></span>
<span id="cb174-4"><a href="the-start-of-the-end.html#cb174-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">&quot;A&quot;</span>, <span class="at">tag_suffix =</span> <span class="st">&quot;)&quot;</span>)</span></code></pre></div>
<p><img src="Rbook_files/figure-html/labelled-nested-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>This is only the basics of what the <code>patchwork</code> package can do but there are many other uses. We won’t go into them in any great detail here, but later in the <a href="tips.html#tips">tips and tricks</a> section we’ll show you some more cool features.</p>
</div>
<div id="make-it-your-own" class="section level3 hasAnchor" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> Make it your own<a href="the-start-of-the-end.html#make-it-your-own" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>While we already have a great figure showing the main aspects of our data, it uses many default layer options. Whilst the default options are fine we may want to change them to get our plot looking exactly how we want it. Maybe we’re going to use this figure in a presentation and we want to make sure someone in the very back of the room can easily read the figure. Maybe we want to use our own colour scheme. Maybe we want to change the grey background to a nice bright neon pink. In essence, maybe we want to decide things for ourselves. This next section will go through how to customise the appearance of our figure.</p>
<p>Let’s start with the easier stuff, namely changing the size of the plotting symbols using the <code>size =</code> argument. Before we do, have a think about where we’d include this argument? Should it be in main call to <code>ggplot()</code> or in the <code>geom_jitter()</code> geom? Does size depend on a variable in our dataset and is therefore something we want displayed on the figure (meaning we should include it within <code>aes()</code>)? Or is it merely changing the appearance of information?</p>
<p>Let’s include it in the <code>geom_jitter</code> geom</p>
<p> </p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="the-start-of-the-end.html#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb175-2"><a href="the-start-of-the-end.html#cb175-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb175-3"><a href="the-start-of-the-end.html#cb175-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb175-4"><a href="the-start-of-the-end.html#cb175-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>)</span></code></pre></div>
<p><img src="Rbook_files/figure-html/change-size-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>Pretty straight forward, we changed the size from the default of <code>size = 1</code> to a value that we decide for ourselves. What happens if you included size in <code>ggplot()</code> or within the <code>aes()</code> of <code>geom_jitter()</code>?</p>
<p>If we wanted to change the shape of the plotting symbols to reflect the different Permit Status (Pending, Issued), how do you think we’d do that? We’d use the <code>shape =</code> argument, but this time we need to include an <code>aes()</code> within <code>geom_jitter()</code> because we want to include specific information to be displayed on the figure.</p>
<p><img src="images/scales_mapping.png" width="15%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="the-start-of-the-end.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb176-2"><a href="the-start-of-the-end.html#cb176-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">shape =</span> <span class="st">`</span><span class="at">Current Status</span><span class="st">`</span>), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb176-3"><a href="the-start-of-the-end.html#cb176-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb176-4"><a href="the-start-of-the-end.html#cb176-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>)</span></code></pre></div>
<p><img src="Rbook_files/figure-html/change-shape-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>Try including `shape = <code>Current Status\`` without also including</code>aes()` and see what happens.</p>
<p>We’re edging our way closer to our “final figure”. Another thing we may want to be able to do is change the transparency of the points. While it’s not actually that useful here, changing the transparency of points is really valuable when you have lots of data resulting in clusters of points obscuring information. Doing this is easily accomplished using the <code>alpha =</code> argument. Again, ask yourself where you think the <code>alpha =</code> argument should be included (hint: you should put it in the <code>geom_jitter</code> geom!).</p>
<p> </p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="the-start-of-the-end.html#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb177-2"><a href="the-start-of-the-end.html#cb177-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb177-3"><a href="the-start-of-the-end.html#cb177-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb177-4"><a href="the-start-of-the-end.html#cb177-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>)</span></code></pre></div>
<p><img src="Rbook_files/figure-html/change-alpha-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>To get the facet labels to wrap correctly we need to use a labeller function within <code>facet_grid</code>.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="the-start-of-the-end.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb178-2"><a href="the-start-of-the-end.html#cb178-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb178-3"><a href="the-start-of-the-end.html#cb178-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb178-4"><a href="the-start-of-the-end.html#cb178-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>,</span>
<span id="cb178-5"><a href="the-start-of-the-end.html#cb178-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">label_wrap_gen</span>(<span class="dv">10</span>))</span>
<span id="cb178-6"><a href="the-start-of-the-end.html#cb178-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="Rbook_files/figure-html/add_labeller-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p>We can also include user defined labels for the x and y axis. There are a couple of ways to do this, but a more familiar way may be to use the same syntax as used in base R figures; using <code>xlab()</code> and <code>ylab()</code>. We’ll specify that these belong to the <code>ggplot</code> by using the <code>+</code> symbol.</p>
<p> </p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="the-start-of-the-end.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb179-2"><a href="the-start-of-the-end.html#cb179-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb179-3"><a href="the-start-of-the-end.html#cb179-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb179-4"><a href="the-start-of-the-end.html#cb179-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>,</span>
<span id="cb179-5"><a href="the-start-of-the-end.html#cb179-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">label_wrap_gen</span>(<span class="dv">10</span>))</span>
<span id="cb179-6"><a href="the-start-of-the-end.html#cb179-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb179-7"><a href="the-start-of-the-end.html#cb179-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Max. Guests&quot;</span>) <span class="sc">+</span></span>
<span id="cb179-8"><a href="the-start-of-the-end.html#cb179-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Max. Bedrooms&quot;</span>)</span></code></pre></div>
<p><img src="Rbook_files/figure-html/axis-labels-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>Great. Let’s now work on the legend title while also including a caption to warn people looking at the figure to treat the trend lines with caution. We’ll use a new layer called <code>labs()</code>, short for labels, which we could have also used for specifying the x and y axes labels (we didn’t only for demonstration purposes, but give it a shot). <code>labs()</code> is a fairly straightforward function. Have a look at the help file (using <code>?labs</code>) to see which arguments are available. We’ll be using <code>caption =</code> argument for our caption, but notice that there isn’t a single simple argument for <code>legend =</code>? That’s because the legend actually contains multiple pieces of information; such as the colour and shape of the symbols. So instead of <code>legend =</code> we’ll use <code>colour =</code> .</p>
<p>I want to introduce a line break in Colour label in <code>Permit Type</code>. <code>\\n</code> is newline character. Here’s how we do it:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="the-start-of-the-end.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb180-2"><a href="the-start-of-the-end.html#cb180-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb180-3"><a href="the-start-of-the-end.html#cb180-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb180-4"><a href="the-start-of-the-end.html#cb180-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>,</span>
<span id="cb180-5"><a href="the-start-of-the-end.html#cb180-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">label_wrap_gen</span>(<span class="dv">10</span>))</span>
<span id="cb180-6"><a href="the-start-of-the-end.html#cb180-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb180-7"><a href="the-start-of-the-end.html#cb180-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Max. Guests&quot;</span>) <span class="sc">+</span></span>
<span id="cb180-8"><a href="the-start-of-the-end.html#cb180-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Max. Bedrooms&quot;</span>) <span class="sc">+</span></span>
<span id="cb180-9"><a href="the-start-of-the-end.html#cb180-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">colour =</span> <span class="st">&quot;Permit</span><span class="sc">\n</span><span class="st">Type&quot;</span>)</span></code></pre></div>
<p><img src="Rbook_files/figure-html/other-labels-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>We can now move onto some more wholesale-stylistic choices using the themes layer.</p>
</div>
<div id="setting-the-theme" class="section level3 hasAnchor" number="5.2.5">
<h3><span class="header-section-number">5.2.5</span> Setting the theme<a href="the-start-of-the-end.html#setting-the-theme" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Themes control the general style of a <code>ggplot</code> (things like the background colour, size of text etc.) and comes with a whole bunch of predefined themes. Let’s play around with themes using some skills we’ve already learnt; assigning plots to an object and plotting multiple <code>ggplots</code> in a single figure using <code>patchwork</code>. We assign themes by creating a new layer with the general notation - <code>theme_NameOfTheme()</code>. For example, to use the <code>theme_classic</code>, <code>theme_bw</code>, <code>theme_minimal</code> and <code>theme_light</code> themes.</p>
<p>To make the figure visible, I am supressing the legend using <code>guides(color = "none")</code>.</p>
<p><img src="images/theme.png" width="7.5%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="the-start-of-the-end.html#cb181-1" aria-hidden="true" tabindex="-1"></a>classic <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb181-2"><a href="the-start-of-the-end.html#cb181-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb181-3"><a href="the-start-of-the-end.html#cb181-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-4"><a href="the-start-of-the-end.html#cb181-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>,</span>
<span id="cb181-5"><a href="the-start-of-the-end.html#cb181-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">label_wrap_gen</span>(<span class="dv">10</span>))</span>
<span id="cb181-6"><a href="the-start-of-the-end.html#cb181-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb181-7"><a href="the-start-of-the-end.html#cb181-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Max. Guests&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-8"><a href="the-start-of-the-end.html#cb181-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Max. Bedrooms&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-9"><a href="the-start-of-the-end.html#cb181-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-10"><a href="the-start-of-the-end.html#cb181-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Classic theme</span></span>
<span id="cb181-11"><a href="the-start-of-the-end.html#cb181-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb181-12"><a href="the-start-of-the-end.html#cb181-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-13"><a href="the-start-of-the-end.html#cb181-13" aria-hidden="true" tabindex="-1"></a>bw <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb181-14"><a href="the-start-of-the-end.html#cb181-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb181-15"><a href="the-start-of-the-end.html#cb181-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-16"><a href="the-start-of-the-end.html#cb181-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>,</span>
<span id="cb181-17"><a href="the-start-of-the-end.html#cb181-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">label_wrap_gen</span>(<span class="dv">10</span>))</span>
<span id="cb181-18"><a href="the-start-of-the-end.html#cb181-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb181-19"><a href="the-start-of-the-end.html#cb181-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Max. Guests&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-20"><a href="the-start-of-the-end.html#cb181-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Max. Bedrooms&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-21"><a href="the-start-of-the-end.html#cb181-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-22"><a href="the-start-of-the-end.html#cb181-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Black and white theme</span></span>
<span id="cb181-23"><a href="the-start-of-the-end.html#cb181-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb181-24"><a href="the-start-of-the-end.html#cb181-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-25"><a href="the-start-of-the-end.html#cb181-25" aria-hidden="true" tabindex="-1"></a>minimal <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb181-26"><a href="the-start-of-the-end.html#cb181-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb181-27"><a href="the-start-of-the-end.html#cb181-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-28"><a href="the-start-of-the-end.html#cb181-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>,</span>
<span id="cb181-29"><a href="the-start-of-the-end.html#cb181-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">label_wrap_gen</span>(<span class="dv">10</span>))</span>
<span id="cb181-30"><a href="the-start-of-the-end.html#cb181-30" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb181-31"><a href="the-start-of-the-end.html#cb181-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Max. Guests&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-32"><a href="the-start-of-the-end.html#cb181-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Max. Bedrooms&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-33"><a href="the-start-of-the-end.html#cb181-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-34"><a href="the-start-of-the-end.html#cb181-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-35"><a href="the-start-of-the-end.html#cb181-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Minimal theme</span></span>
<span id="cb181-36"><a href="the-start-of-the-end.html#cb181-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb181-37"><a href="the-start-of-the-end.html#cb181-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-38"><a href="the-start-of-the-end.html#cb181-38" aria-hidden="true" tabindex="-1"></a>light <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb181-39"><a href="the-start-of-the-end.html#cb181-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb181-40"><a href="the-start-of-the-end.html#cb181-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-41"><a href="the-start-of-the-end.html#cb181-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>,</span>
<span id="cb181-42"><a href="the-start-of-the-end.html#cb181-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">label_wrap_gen</span>(<span class="dv">10</span>))</span>
<span id="cb181-43"><a href="the-start-of-the-end.html#cb181-43" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb181-44"><a href="the-start-of-the-end.html#cb181-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Max. Guests&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-45"><a href="the-start-of-the-end.html#cb181-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Max. Bedrooms&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-46"><a href="the-start-of-the-end.html#cb181-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-47"><a href="the-start-of-the-end.html#cb181-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-48"><a href="the-start-of-the-end.html#cb181-48" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Light theme</span></span>
<span id="cb181-49"><a href="the-start-of-the-end.html#cb181-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span>
<span id="cb181-50"><a href="the-start-of-the-end.html#cb181-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-51"><a href="the-start-of-the-end.html#cb181-51" aria-hidden="true" tabindex="-1"></a>(classic <span class="sc">|</span> bw) <span class="sc">/</span></span>
<span id="cb181-52"><a href="the-start-of-the-end.html#cb181-52" aria-hidden="true" tabindex="-1"></a>  (minimal <span class="sc">|</span> light)</span></code></pre></div>
<p><img src="Rbook_files/figure-html/testing-themes-1.png" width="85%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>In terms of finding a theme that most closely matches our “final figure”, it’s probably going to be <code>theme_classic()</code>. There are additional themes available to you, and even more available online. <code>ggthemes</code> is a package which contains many more themes for you to use. The BBC even have their own <code>ggplot2</code> theme called “BBplot” which they use when making their own figures (while good, we don’t like it too much for scientific figures). Indeed, you can even make your own theme which is what we’ll work on next. To begin with, we’ll have a look to see how <code>theme_classic()</code> was coded. We can do that easily enough by just writing the function name without the parentheses (see <a href="prog_r.html#prog_r">Chapter 7</a> for a bit more on this).</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="the-start-of-the-end.html#cb182-1" aria-hidden="true" tabindex="-1"></a>theme_classic</span>
<span id="cb182-2"><a href="the-start-of-the-end.html#cb182-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (<span class="at">base_size =</span> <span class="dv">11</span>, <span class="at">base_family =</span> <span class="st">&quot;&quot;</span>, <span class="at">base_line_size =</span> base_size<span class="sc">/</span><span class="dv">22</span>, </span>
<span id="cb182-3"><a href="the-start-of-the-end.html#cb182-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">base_rect_size =</span> base_size<span class="sc">/</span><span class="dv">22</span>) </span>
<span id="cb182-4"><a href="the-start-of-the-end.html#cb182-4" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb182-5"><a href="the-start-of-the-end.html#cb182-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>(<span class="at">base_size =</span> base_size, <span class="at">base_family =</span> base_family, </span>
<span id="cb182-6"><a href="the-start-of-the-end.html#cb182-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">base_line_size =</span> base_line_size, <span class="at">base_rect_size =</span> base_rect_size) <span class="sc">%+replace%</span> </span>
<span id="cb182-7"><a href="the-start-of-the-end.html#cb182-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme</span>(<span class="at">panel.border =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb182-8"><a href="the-start-of-the-end.html#cb182-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, </span>
<span id="cb182-9"><a href="the-start-of-the-end.html#cb182-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> <span class="fu">rel</span>(<span class="dv">1</span>)), <span class="at">legend.key =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb182-10"><a href="the-start-of-the-end.html#cb182-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, </span>
<span id="cb182-11"><a href="the-start-of-the-end.html#cb182-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> <span class="fu">rel</span>(<span class="dv">2</span>)), <span class="at">complete =</span> <span class="cn">TRUE</span>)</span>
<span id="cb182-12"><a href="the-start-of-the-end.html#cb182-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb182-13"><a href="the-start-of-the-end.html#cb182-13" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span>bytecode<span class="sc">:</span> <span class="dv">0x7fc705e3fa40</span><span class="sc">&gt;</span></span>
<span id="cb182-14"><a href="the-start-of-the-end.html#cb182-14" aria-hidden="true" tabindex="-1"></a><span class="er">&lt;</span>environment<span class="sc">:</span> namespace<span class="sc">:</span>ggplot2<span class="sc">&gt;</span></span></code></pre></div>
<p>Let’s use this code as the basis for our own theme and modify it according to our needs. We’ll call the theme, <code>theme_rbook</code>. Not all of the options will immediately make sense, but don’t worry about this too much for now. Just know that the settings we’re putting in place are:</p>
<p> </p>
<ul>
<li>Font size for axis titles = 13</li>
<li>Font size for x axis text = 10</li>
<li>Font size for y axis text = 10</li>
<li>Font for caption = 10 and italics</li>
<li>Background colour = white</li>
<li>Background border = black</li>
<li>Axis lines = black</li>
<li>Strip colour (for facets) = light blue</li>
<li>Strip text colour (for facets) = black</li>
<li>Legend box colours = No colour</li>
<li>Legend position = bottom</li>
</ul>
<p> </p>
<p>This is by no means an exhaustive list of features you can specify in your own theme, but this will get you started. Of course, there’s no need to use a personalised theme as the pre-built options are perfectly suitable.</p>
<p><img src="images/theme.png" width="7.5%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="the-start-of-the-end.html#cb183-1" aria-hidden="true" tabindex="-1"></a>theme_rbook <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">base_size =</span> <span class="dv">13</span>, <span class="at">base_family =</span> <span class="st">&quot;&quot;</span>, <span class="at">base_line_size =</span> base_size <span class="sc">/</span> <span class="dv">22</span>,</span>
<span id="cb183-2"><a href="the-start-of-the-end.html#cb183-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">base_rect_size =</span> base_size <span class="sc">/</span> <span class="dv">22</span>) {</span>
<span id="cb183-3"><a href="the-start-of-the-end.html#cb183-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb183-4"><a href="the-start-of-the-end.html#cb183-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">13</span>),</span>
<span id="cb183-5"><a href="the-start-of-the-end.html#cb183-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb183-6"><a href="the-start-of-the-end.html#cb183-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb183-7"><a href="the-start-of-the-end.html#cb183-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">face =</span> <span class="st">&quot;italic&quot;</span>),</span>
<span id="cb183-8"><a href="the-start-of-the-end.html#cb183-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>),</span>
<span id="cb183-9"><a href="the-start-of-the-end.html#cb183-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>),</span>
<span id="cb183-10"><a href="the-start-of-the-end.html#cb183-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;#cddcdd&quot;</span>),</span>
<span id="cb183-11"><a href="the-start-of-the-end.html#cb183-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">size =</span> <span class="fl">0.5</span>),</span>
<span id="cb183-12"><a href="the-start-of-the-end.html#cb183-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>),</span>
<span id="cb183-13"><a href="the-start-of-the-end.html#cb183-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb183-14"><a href="the-start-of-the-end.html#cb183-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb183-15"><a href="the-start-of-the-end.html#cb183-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb183-16"><a href="the-start-of-the-end.html#cb183-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p> </p>
<p><code>theme_rbook()</code> is now available for us to use just like any other theme. Let’s try remaking our figure using our new theme.</p>
<p><img src="images/theme.png" width="7.5%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="the-start-of-the-end.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb184-2"><a href="the-start-of-the-end.html#cb184-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb184-3"><a href="the-start-of-the-end.html#cb184-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb184-4"><a href="the-start-of-the-end.html#cb184-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>,</span>
<span id="cb184-5"><a href="the-start-of-the-end.html#cb184-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">label_wrap_gen</span>(<span class="dv">10</span>))</span>
<span id="cb184-6"><a href="the-start-of-the-end.html#cb184-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb184-7"><a href="the-start-of-the-end.html#cb184-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Max. Guests&quot;</span>) <span class="sc">+</span></span>
<span id="cb184-8"><a href="the-start-of-the-end.html#cb184-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Max. Bedrooms&quot;</span>) <span class="sc">+</span></span>
<span id="cb184-9"><a href="the-start-of-the-end.html#cb184-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">colour =</span> <span class="st">&quot;Permit</span><span class="sc">\n</span><span class="st">Type&quot;</span>) <span class="sc">+</span></span>
<span id="cb184-10"><a href="the-start-of-the-end.html#cb184-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Updated theme to our theme_rbook</span></span>
<span id="cb184-11"><a href="the-start-of-the-end.html#cb184-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_rbook</span>() <span class="co"># use our new theme</span></span></code></pre></div>
<p><img src="Rbook_files/figure-html/rbook-figure-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
</div>
<div id="prettification" class="section level3 hasAnchor" number="5.2.6">
<h3><span class="header-section-number">5.2.6</span> Prettification<a href="the-start-of-the-end.html#prettification" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We’ve pretty much replicated our “final figure”. We just have a few final adjustments to make, and we’ll do so in order of difficulty.</p>
<p>Let’s remind ourselves of what that “final figure” looked like. Remember, since we’ve previously stored the figure as an object called <code>final_figure</code> we can just type that into the console and pull up the figure.</p>
<p> </p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="the-start-of-the-end.html#cb185-1" aria-hidden="true" tabindex="-1"></a>final_figure <span class="sc">+</span></span>
<span id="cb185-2"><a href="the-start-of-the-end.html#cb185-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Reminder of the final figure&quot;</span>)</span></code></pre></div>
<p><img src="Rbook_files/figure-html/final-figure-reminder-1.png" width="75%" style="display: block; margin: auto;" /></p>
<p> </p>
<p>The only things left to do are to change the colour and the shape of the points to something of our choosing and include information on the “overall” trend line in the legend. We’ll begin with the former; changing colour and shape to something we specifically want. When we first started using <code>ggplot2</code> this was the thing which caused us the most difficulty. We think the reason is, that to manually change the colours actually requires an additional layer, where we assumed this would be done in either the main call to <code>ggplot()</code> or in a geom.</p>
<p>Instead of doing this within the specific geom, we’ll use <code>scale_colour_manual()</code> as well as <code>scale_shape_manual()</code>. Doing it this way will allow us to do two things at once; change the shape and colour to our choosing, and assign labels to these (much like what we did with <code>xlab()</code> and <code>ylab()</code>). Doing so is not too complex but will require nesting a function (<code>c()</code>) within our <code>scale_colour_manual</code> and <code>scale_shape_manual</code> functions (see <a href="basics_r.html#basics_r">Chapter 2</a> for a reminder on the concatenate function (<code>c()</code>) if you’ve forgotten).</p>
<p>Choosing colours can be fiddly. We’ve found using a colour wheel helps with this step. You can always use Google to find an interactive colour wheel, or use Google’s Colour picker. Any decent website should give you a HEX code, something like: #5C1AAE which is a “code” representation of a colour. Alternatively, there are colour names which R and <code>ggplot2</code> will also understand (e.g. “firebrick4”). Having chosen our colours using whichever means, let’s see how we can do it:</p>
<p><img src="images/scales.png" width="7.5%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="the-start-of-the-end.html#cb186-1" aria-hidden="true" tabindex="-1"></a>final_figure <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Guest Occupancy Limit</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Bedroom Limit</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Permit Type</span><span class="st">`</span>), <span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb186-2"><a href="the-start-of-the-end.html#cb186-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb186-3"><a href="the-start-of-the-end.html#cb186-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb186-4"><a href="the-start-of-the-end.html#cb186-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="st">`</span><span class="at">Current Status</span><span class="st">`</span> <span class="sc">~</span> <span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span>,</span>
<span id="cb186-5"><a href="the-start-of-the-end.html#cb186-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="st">`</span><span class="at">Residential Subtype</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">label_wrap_gen</span>(<span class="dv">10</span>))</span>
<span id="cb186-6"><a href="the-start-of-the-end.html#cb186-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb186-7"><a href="the-start-of-the-end.html#cb186-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Max. Guests&quot;</span>) <span class="sc">+</span></span>
<span id="cb186-8"><a href="the-start-of-the-end.html#cb186-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Max. Bedrooms&quot;</span>) <span class="sc">+</span></span>
<span id="cb186-9"><a href="the-start-of-the-end.html#cb186-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">colour =</span> <span class="st">&quot;Permit</span><span class="sc">\n</span><span class="st">Type&quot;</span>) <span class="sc">+</span></span>
<span id="cb186-10"><a href="the-start-of-the-end.html#cb186-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(</span>
<span id="cb186-11"><a href="the-start-of-the-end.html#cb186-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#5C1AAE&quot;</span>, <span class="st">&quot;#AE5C1A&quot;</span>, <span class="st">&quot;#1AAE5C&quot;</span>)</span>
<span id="cb186-12"><a href="the-start-of-the-end.html#cb186-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb186-13"><a href="the-start-of-the-end.html#cb186-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_rbook</span>()</span></code></pre></div>
<p> </p>
<p>To make sense of that code (or any code for that matter) try running it piece by piece. For instance in the above code, if we run <code>c("#5C1AAE", "#AE5C1A", "#1AAE5C")</code> we’ll get a list of those strings. That list is then passed on to <code>scale_colour_manual()</code> as the colours we wish to use. Since we only have three <code>Permit Types</code>, it will use these three colours. Try including an additional colour in the list and see what happens (if you place the new colour at the end of the list, nothing will happen since it will use the first three colours of the list - try adding it to the start of the list).</p>
<p>And we’ve done it! Our final figure matches the “final figure” exactly. We can then save the final figure to our computer so that we can include it in a poster etc. The code for this is straightforward, but does require an understanding of file paths. Be sure to check <a href="work-d.html#work-d">Chapter 1</a> for an explanation if you’re unsure. To save <code>ggplot</code> figures to an external file we use the function <code>ggsave</code>.</p>
<p>This is the point when having assigned the code to the object named <code>rbook_figure</code> comes in handy. Doing so allows us to specify which figure to save within <code>ggsave()</code>. If we hadn’t specified which plot to save, <code>ggsave()</code> would instead save the last figure produced.</p>
<p>Other important arguments to take note of are: <code>device =</code> which tells <code>ggplot2</code> what format we want to save the figure (in this case a pdf) though <code>ggplot2</code> is often smart enough to guess this based on the extension we give our file name, so it is often redundant; <code>units =</code> which specifies the units used in <code>width =</code> and <code>height =</code>; <code>width =</code> and <code>height =</code> specify the width and height of figure (in this case in mm as specified using <code>units =</code>); <code>dpi =</code> which controls the resolution of the saved figure; and <code>limitsize =</code> which prevents accidentally saving a massive figure of 1 km x 1 km!</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="the-start-of-the-end.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(</span>
<span id="cb187-2"><a href="the-start-of-the-end.html#cb187-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">filename =</span> <span class="st">&quot;maxbedrooms_occupancylimit_facet.pdf&quot;</span>, <span class="at">plot =</span> final_figure, <span class="at">device =</span> <span class="st">&quot;pdf&quot;</span>,</span>
<span id="cb187-3"><a href="the-start-of-the-end.html#cb187-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="st">&quot;output&quot;</span>, <span class="at">width =</span> <span class="dv">250</span>, <span class="at">height =</span> <span class="dv">150</span>, <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>,</span>
<span id="cb187-4"><a href="the-start-of-the-end.html#cb187-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">dpi =</span> <span class="dv">500</span>, <span class="at">limitsize =</span> <span class="cn">TRUE</span></span>
<span id="cb187-5"><a href="the-start-of-the-end.html#cb187-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>This concludes the worked example to reproduce our final figure. While absolutely not an exhaustive list of what you can do with <code>ggplot2</code>, this will hopefully help when you’re making your own from scratch or, perhaps likely when starting, copying <code>ggplots</code> made by other people (in which case hopefully this will help you understand what they’ve done).</p>
<p>Two sections follow this one. The first is simply a collection of tips and tricks that couldn’t quite make their way into this worked example, and the second section is a collection of different geometries to give you a feel for what’s possible. We would recommend only glancing through each section and coming back to them as and when you need to know how to do <em>that particular thing</em>.</p>
<p>Hopefully you’ve enjoyed reading through this Chapter, and more importantly, that it’s increased your confidence in making figures. Here are two final parting <em>words of wisdom!</em>. First, as we’ve said before, don’t fall into the trap of thinking your figures are superior to those who don’t use <code>ggplot2</code>. As we’ve mentioned previously, equivalent figures are possible in both base R and <code>ggplot2</code>. The only difference is how you get to those figures.</p>
<p>Secondly, don’t overcomplicate your figures. With regards to the final figure we produced here, we’ve gone back and forth as to whether we are guilty of this. The figure does contain a lot of information, drawing on information from five different variables, with one of those being presented in three different ways. We would be reluctant, for example, to include this in a presentation as it would likely be too much for an audience to fully appreciate in the 30 seconds to 1 minute that they’ll see it. In the end we decided it was worth the risk as it served as a nice demonstration. Fortunately, or unfortunately depending on your view, there are no hard and fast rules when it comes to making figures. Much of it will be at your discretion, so please ensure you give it some thought.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="beginning-at-the-end.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tips.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/nkaza/intro2Rbook/edit/master/05-gg_graphics.Rmd",
"text": "Suggest an edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["Rbook.pdf", "Download PDF version"]],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"highlight": "tango"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
