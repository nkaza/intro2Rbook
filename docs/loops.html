<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6.4 Loops | An Introduction to R</title>
  <meta name="description" content="A practical introduction to using R for data analysis" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="6.4 Loops | An Introduction to R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://nkaza.github.io/intro2Rbook//images/cover_v4.png" />
  <meta property="og:description" content="A practical introduction to using R for data analysis" />
  <meta name="github-repo" content="nkaza/intro2Rbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6.4 Loops | An Introduction to R" />
  
  <meta name="twitter:description" content="A practical introduction to using R for data analysis" />
  <meta name="twitter:image" content="https://nkaza.github.io/intro2Rbook//images/cover_v4.png" />

<meta name="author" content="Nikhil Kaza" />


<meta name="date" content="2022-08-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="combining-logical-operators.html"/>
<link rel="next" href="exercise-6.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-162377463-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-162377463-3');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">An Introduction R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="0.1" data-path="the-aim-of-this-book.html"><a href="the-aim-of-this-book.html"><i class="fa fa-check"></i><b>0.1</b> The aim of this book</a></li>
<li class="chapter" data-level="0.2" data-path="who-is-this-book-for.html"><a href="who-is-this-book-for.html"><i class="fa fa-check"></i><b>0.2</b> Who is this book for?</a></li>
<li class="chapter" data-level="0.3" data-path="how-to-use-this-book.html"><a href="how-to-use-this-book.html"><i class="fa fa-check"></i><b>0.3</b> How to use this book</a></li>
<li class="chapter" data-level="0.4" data-path="book-website.html"><a href="book-website.html"><i class="fa fa-check"></i><b>0.4</b> Book website</a></li>
<li class="chapter" data-level="0.5" data-path="some-r-pointers.html"><a href="some-r-pointers.html"><i class="fa fa-check"></i><b>0.5</b> Some R pointers</a></li>
<li class="chapter" data-level="0.6" data-path="license.html"><a href="license.html"><i class="fa fa-check"></i><b>0.6</b> License</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="chap1.html"><a href="chap1.html"><i class="fa fa-check"></i><b>1</b> Getting started with R and RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="install_r.html"><a href="install_r.html"><i class="fa fa-check"></i><b>1.1</b> Installing R</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="install_r.html"><a href="install_r.html#windows-users"><i class="fa fa-check"></i><b>1.1.1</b> Windows users</a></li>
<li class="chapter" data-level="1.1.2" data-path="install_r.html"><a href="install_r.html#mac-users"><i class="fa fa-check"></i><b>1.1.2</b> Mac users</a></li>
<li class="chapter" data-level="1.1.3" data-path="install_r.html"><a href="install_r.html#linux-users"><i class="fa fa-check"></i><b>1.1.3</b> Linux users</a></li>
<li class="chapter" data-level="1.1.4" data-path="install_r.html"><a href="install_r.html#testing-r"><i class="fa fa-check"></i><b>1.1.4</b> Testing R</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="installing-rstudio.html"><a href="installing-rstudio.html"><i class="fa fa-check"></i><b>1.2</b> Installing RStudio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="installing-rstudio.html"><a href="installing-rstudio.html#windows-and-mac-users"><i class="fa fa-check"></i><b>1.2.1</b> Windows and Mac users</a></li>
<li class="chapter" data-level="1.2.2" data-path="installing-rstudio.html"><a href="installing-rstudio.html#linux-users-1"><i class="fa fa-check"></i><b>1.2.2</b> Linux users</a></li>
<li class="chapter" data-level="1.2.3" data-path="installing-rstudio.html"><a href="installing-rstudio.html#testing-rstudio"><i class="fa fa-check"></i><b>1.2.3</b> Testing RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="rstudio_orient.html"><a href="rstudio_orient.html"><i class="fa fa-check"></i><b>1.3</b> RStudio orientation</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="rstudio_orient.html"><a href="rstudio_orient.html#cons"><i class="fa fa-check"></i><b>1.3.1</b> Console</a></li>
<li class="chapter" data-level="1.3.2" data-path="rstudio_orient.html"><a href="rstudio_orient.html#environmenthistoryconnections"><i class="fa fa-check"></i><b>1.3.2</b> Environment/History/Connections</a></li>
<li class="chapter" data-level="1.3.3" data-path="rstudio_orient.html"><a href="rstudio_orient.html#filesplotspackageshelpviewer"><i class="fa fa-check"></i><b>1.3.3</b> Files/Plots/Packages/Help/Viewer</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="alternatives-to-rstudio.html"><a href="alternatives-to-rstudio.html"><i class="fa fa-check"></i><b>1.4</b> Alternatives to RStudio</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="alternatives-to-rstudio.html"><a href="alternatives-to-rstudio.html#advanced-text-editors"><i class="fa fa-check"></i><b>1.4.1</b> Advanced text editors</a></li>
<li class="chapter" data-level="1.4.2" data-path="alternatives-to-rstudio.html"><a href="alternatives-to-rstudio.html#integrated-developement-environements"><i class="fa fa-check"></i><b>1.4.2</b> Integrated developement environements</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>1.5</b> R packages</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="packages.html"><a href="packages.html#cran_packages"><i class="fa fa-check"></i><b>1.5.1</b> CRAN packages</a></li>
<li class="chapter" data-level="1.5.2" data-path="packages.html"><a href="packages.html#bioconductor-packages"><i class="fa fa-check"></i><b>1.5.2</b> Bioconductor packages</a></li>
<li class="chapter" data-level="1.5.3" data-path="packages.html"><a href="packages.html#github-packages"><i class="fa fa-check"></i><b>1.5.3</b> GitHub packages</a></li>
<li class="chapter" data-level="1.5.4" data-path="packages.html"><a href="packages.html#using-packages"><i class="fa fa-check"></i><b>1.5.4</b> Using packages</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="rsprojs.html"><a href="rsprojs.html"><i class="fa fa-check"></i><b>1.6</b> Projects in RStudio</a></li>
<li class="chapter" data-level="1.7" data-path="work-d.html"><a href="work-d.html"><i class="fa fa-check"></i><b>1.7</b> Working directories</a></li>
<li class="chapter" data-level="1.8" data-path="dir_struct.html"><a href="dir_struct.html"><i class="fa fa-check"></i><b>1.8</b> Directory structure</a></li>
<li class="chapter" data-level="1.9" data-path="file_names.html"><a href="file_names.html"><i class="fa fa-check"></i><b>1.9</b> File names</a></li>
<li class="chapter" data-level="1.10" data-path="proj_doc.html"><a href="proj_doc.html"><i class="fa fa-check"></i><b>1.10</b> Project documentation</a></li>
<li class="chapter" data-level="1.11" data-path="r-style-guide.html"><a href="r-style-guide.html"><i class="fa fa-check"></i><b>1.11</b> R style guide</a></li>
<li class="chapter" data-level="1.12" data-path="backing-up-projects.html"><a href="backing-up-projects.html"><i class="fa fa-check"></i><b>1.12</b> Backing up projects</a></li>
<li class="chapter" data-level="1.13" data-path="citing-r.html"><a href="citing-r.html"><i class="fa fa-check"></i><b>1.13</b> Citing R</a></li>
<li class="chapter" data-level="1.14" data-path="exercise-1.html"><a href="exercise-1.html"><i class="fa fa-check"></i><b>1.14</b> Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basics_r.html"><a href="basics_r.html"><i class="fa fa-check"></i><b>2</b> Some R basics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>2.1</b> Getting started</a></li>
<li class="chapter" data-level="2.2" data-path="objects-in-r.html"><a href="objects-in-r.html"><i class="fa fa-check"></i><b>2.2</b> Objects in R</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="objects-in-r.html"><a href="objects-in-r.html#r_objs"><i class="fa fa-check"></i><b>2.2.1</b> Creating objects</a></li>
<li class="chapter" data-level="2.2.2" data-path="objects-in-r.html"><a href="objects-in-r.html#naming-objects"><i class="fa fa-check"></i><b>2.2.2</b> Naming objects</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="using-functions-in-r.html"><a href="using-functions-in-r.html"><i class="fa fa-check"></i><b>2.3</b> Using functions in R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="using-functions-in-r.html"><a href="using-functions-in-r.html#pipes.-a-better-way"><i class="fa fa-check"></i><b>2.3.1</b> Pipes. A better way!!!!!</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>2.4</b> Working with vectors</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="vectors.html"><a href="vectors.html#extracting-elements"><i class="fa fa-check"></i><b>2.4.1</b> Extracting elements</a></li>
<li class="chapter" data-level="2.4.2" data-path="vectors.html"><a href="vectors.html#replacing-elements"><i class="fa fa-check"></i><b>2.4.2</b> Replacing elements</a></li>
<li class="chapter" data-level="2.4.3" data-path="vectors.html"><a href="vectors.html#vec_ord"><i class="fa fa-check"></i><b>2.4.3</b> Ordering elements</a></li>
<li class="chapter" data-level="2.4.4" data-path="vectors.html"><a href="vectors.html#vectorisation"><i class="fa fa-check"></i><b>2.4.4</b> Vectorisation</a></li>
<li class="chapter" data-level="2.4.5" data-path="vectors.html"><a href="vectors.html#na_vals"><i class="fa fa-check"></i><b>2.4.5</b> Missing data</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="help.html"><a href="help.html"><i class="fa fa-check"></i><b>2.5</b> Getting help</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="help.html"><a href="help.html#r-help"><i class="fa fa-check"></i><b>2.5.1</b> R help</a></li>
<li class="chapter" data-level="2.5.2" data-path="help.html"><a href="help.html#rhelp"><i class="fa fa-check"></i><b>2.5.2</b> Other sources of help</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="saving-stuff-in-r.html"><a href="saving-stuff-in-r.html"><i class="fa fa-check"></i><b>2.6</b> Saving stuff in R</a></li>
<li class="chapter" data-level="2.7" data-path="exercise-2.html"><a href="exercise-2.html"><i class="fa fa-check"></i><b>2.7</b> Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data_r.html"><a href="data_r.html"><i class="fa fa-check"></i><b>3</b> Data in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="basic-data-types.html"><a href="basic-data-types.html"><i class="fa fa-check"></i><b>3.1</b> Basic Data types</a></li>
<li class="chapter" data-level="3.2" data-path="complicated-data-types.html"><a href="complicated-data-types.html"><i class="fa fa-check"></i><b>3.2</b> Complicated Data Types</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="complicated-data-types.html"><a href="complicated-data-types.html#dealing-with-date-and-time"><i class="fa fa-check"></i><b>3.2.1</b> Dealing with Date and Time</a></li>
<li class="chapter" data-level="3.2.2" data-path="complicated-data-types.html"><a href="complicated-data-types.html#factors"><i class="fa fa-check"></i><b>3.2.2</b> Factors</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>3.3</b> Data structures</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-structures.html"><a href="data-structures.html#scal_vecs"><i class="fa fa-check"></i><b>3.3.1</b> Scalars and vectors</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-structures.html"><a href="data-structures.html#mat_array"><i class="fa fa-check"></i><b>3.3.2</b> Matrices and arrays</a></li>
<li class="chapter" data-level="3.3.3" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>3.3.3</b> Lists</a></li>
<li class="chapter" data-level="3.3.4" data-path="data-structures.html"><a href="data-structures.html#df"><i class="fa fa-check"></i><b>3.3.4</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>3.4</b> Importing data</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="importing-data.html"><a href="importing-data.html#saving-files-to-import"><i class="fa fa-check"></i><b>3.4.1</b> Saving files to import</a></li>
<li class="chapter" data-level="3.4.2" data-path="importing-data.html"><a href="importing-data.html#import_fnc"><i class="fa fa-check"></i><b>3.4.2</b> Import functions</a></li>
<li class="chapter" data-level="3.4.3" data-path="importing-data.html"><a href="importing-data.html#common-import-frustrations"><i class="fa fa-check"></i><b>3.4.3</b> Common import frustrations</a></li>
<li class="chapter" data-level="3.4.4" data-path="importing-data.html"><a href="importing-data.html#import_other"><i class="fa fa-check"></i><b>3.4.4</b> Other import options</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="wrangling-data-frames.html"><a href="wrangling-data-frames.html"><i class="fa fa-check"></i><b>3.5</b> Wrangling data frames</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="wrangling-data-frames.html"><a href="wrangling-data-frames.html#positional-indexes"><i class="fa fa-check"></i><b>3.5.1</b> Positional indexes</a></li>
<li class="chapter" data-level="3.5.2" data-path="wrangling-data-frames.html"><a href="wrangling-data-frames.html#logical-indexes"><i class="fa fa-check"></i><b>3.5.2</b> Logical indexes</a></li>
<li class="chapter" data-level="3.5.3" data-path="wrangling-data-frames.html"><a href="wrangling-data-frames.html#adding-columns-and-rows"><i class="fa fa-check"></i><b>3.5.3</b> Adding columns and rows</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="summarising-data-frames.html"><a href="summarising-data-frames.html"><i class="fa fa-check"></i><b>3.6</b> Summarising data frames</a></li>
<li class="chapter" data-level="3.7" data-path="exporting-data.html"><a href="exporting-data.html"><i class="fa fa-check"></i><b>3.7</b> Exporting data</a></li>
<li class="chapter" data-level="3.8" data-path="exercise-3.html"><a href="exercise-3.html"><i class="fa fa-check"></i><b>3.8</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data_tidyverse.html"><a href="data_tidyverse.html"><i class="fa fa-check"></i><b>4</b> Tidyverse</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-frames-tibbles.html"><a href="data-frames-tibbles.html"><i class="fa fa-check"></i><b>4.1</b> Data Frames &amp; Tibbles</a></li>
<li class="chapter" data-level="4.2" data-path="reading-external-data.html"><a href="reading-external-data.html"><i class="fa fa-check"></i><b>4.2</b> Reading external data</a></li>
<li class="chapter" data-level="4.3" data-path="wrangling-data.html"><a href="wrangling-data.html"><i class="fa fa-check"></i><b>4.3</b> Wrangling Data</a></li>
<li class="chapter" data-level="4.4" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>4.4</b> Relational Data</a></li>
<li class="chapter" data-level="4.5" data-path="exercise-4.html"><a href="exercise-4.html"><i class="fa fa-check"></i><b>4.5</b> Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="graphics_r.html"><a href="graphics_r.html"><i class="fa fa-check"></i><b>5</b> Graphics with ggplot</a>
<ul>
<li class="chapter" data-level="5.1" data-path="beginning-at-the-end.html"><a href="beginning-at-the-end.html"><i class="fa fa-check"></i><b>5.1</b> Beginning at the end</a></li>
<li class="chapter" data-level="5.2" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html"><i class="fa fa-check"></i><b>5.2</b> The start of the end</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#the-purest-of-ggplots"><i class="fa fa-check"></i><b>5.2.1</b> The purest of ggplots</a></li>
<li class="chapter" data-level="5.2.2" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#wrapping-grids"><i class="fa fa-check"></i><b>5.2.2</b> Wrapping grids</a></li>
<li class="chapter" data-level="5.2.3" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#plotting-multiple-ggplots"><i class="fa fa-check"></i><b>5.2.3</b> Plotting multiple ggplots</a></li>
<li class="chapter" data-level="5.2.4" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#make-it-your-own"><i class="fa fa-check"></i><b>5.2.4</b> Make it your own</a></li>
<li class="chapter" data-level="5.2.5" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#setting-the-theme"><i class="fa fa-check"></i><b>5.2.5</b> Setting the theme</a></li>
<li class="chapter" data-level="5.2.6" data-path="the-start-of-the-end.html"><a href="the-start-of-the-end.html#prettification"><i class="fa fa-check"></i><b>5.2.6</b> Prettification</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="tips.html"><a href="tips.html"><i class="fa fa-check"></i><b>5.3</b> Tips and tricks</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="tips.html"><a href="tips.html#statistics-layer"><i class="fa fa-check"></i><b>5.3.1</b> Statistics layer</a></li>
<li class="chapter" data-level="5.3.2" data-path="tips.html"><a href="tips.html#axis-limits-and-zooms"><i class="fa fa-check"></i><b>5.3.2</b> Axis limits and zooms</a></li>
<li class="chapter" data-level="5.3.3" data-path="tips.html"><a href="tips.html#layering-layers"><i class="fa fa-check"></i><b>5.3.3</b> Layering layers</a></li>
<li class="chapter" data-level="5.3.4" data-path="tips.html"><a href="tips.html#continuous-colours"><i class="fa fa-check"></i><b>5.3.4</b> Continuous colours</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="exercise-5.html"><a href="exercise-5.html"><i class="fa fa-check"></i><b>5.4</b> Exercise 5</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="prog_r.html"><a href="prog_r.html"><i class="fa fa-check"></i><b>6</b> Programming in R</a>
<ul>
<li class="chapter" data-level="6.1" data-path="functions-in-r.html"><a href="functions-in-r.html"><i class="fa fa-check"></i><b>6.1</b> Functions in R</a></li>
<li class="chapter" data-level="6.2" data-path="conditional-statements.html"><a href="conditional-statements.html"><i class="fa fa-check"></i><b>6.2</b> Conditional statements</a></li>
<li class="chapter" data-level="6.3" data-path="combining-logical-operators.html"><a href="combining-logical-operators.html"><i class="fa fa-check"></i><b>6.3</b> Combining logical operators</a></li>
<li class="chapter" data-level="6.4" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>6.4</b> Loops</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="loops.html"><a href="loops.html#for-loop"><i class="fa fa-check"></i><b>6.4.1</b> For loop</a></li>
<li class="chapter" data-level="6.4.2" data-path="loops.html"><a href="loops.html#while-loop"><i class="fa fa-check"></i><b>6.4.2</b> While loop</a></li>
<li class="chapter" data-level="6.4.3" data-path="loops.html"><a href="loops.html#when-to-use-a-loop"><i class="fa fa-check"></i><b>6.4.3</b> When to use a loop?</a></li>
<li class="chapter" data-level="6.4.4" data-path="loops.html"><a href="loops.html#if-not-loops-then-what"><i class="fa fa-check"></i><b>6.4.4</b> If not loops, then what?</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="exercise-6.html"><a href="exercise-6.html"><i class="fa fa-check"></i><b>6.5</b> Exercise 6</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="install-rm.html"><a href="install-rm.html"><i class="fa fa-check"></i><b>A</b> Installing R Markdown</a>
<ul>
<li class="chapter" data-level="A.1" data-path="ms-windows.html"><a href="ms-windows.html"><i class="fa fa-check"></i><b>A.1</b> MS Windows</a></li>
<li class="chapter" data-level="A.2" data-path="mac-osx.html"><a href="mac-osx.html"><i class="fa fa-check"></i><b>A.2</b> Mac OSX</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="rmarkdown_r.html"><a href="rmarkdown_r.html"><i class="fa fa-check"></i><b>B</b> Reproducible reports with R markdown</a>
<ul>
<li class="chapter" data-level="B.1" data-path="what-is-r-markdown.html"><a href="what-is-r-markdown.html"><i class="fa fa-check"></i><b>B.1</b> What is R markdown?</a></li>
<li class="chapter" data-level="B.2" data-path="why-use-r-markdown.html"><a href="why-use-r-markdown.html"><i class="fa fa-check"></i><b>B.2</b> Why use R markdown?</a></li>
<li class="chapter" data-level="B.3" data-path="get-started-with-r-markdown.html"><a href="get-started-with-r-markdown.html"><i class="fa fa-check"></i><b>B.3</b> Get started with R markdown</a></li>
<li class="chapter" data-level="B.4" data-path="new_rm.html"><a href="new_rm.html"><i class="fa fa-check"></i><b>B.4</b> Create an R markdown document</a></li>
<li class="chapter" data-level="B.5" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html"><i class="fa fa-check"></i><b>B.5</b> R markdown anatomy</a>
<ul>
<li class="chapter" data-level="B.5.1" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#yaml-header"><i class="fa fa-check"></i><b>B.5.1</b> YAML header</a></li>
<li class="chapter" data-level="B.5.2" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#formatted-text"><i class="fa fa-check"></i><b>B.5.2</b> Formatted text</a></li>
<li class="chapter" data-level="B.5.3" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#code_chunks"><i class="fa fa-check"></i><b>B.5.3</b> Code chunks</a></li>
<li class="chapter" data-level="B.5.4" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#adding-figures"><i class="fa fa-check"></i><b>B.5.4</b> Adding figures</a></li>
<li class="chapter" data-level="B.5.5" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#adding-tables"><i class="fa fa-check"></i><b>B.5.5</b> Adding tables</a></li>
<li class="chapter" data-level="B.5.6" data-path="r-markdown-anatomy.html"><a href="r-markdown-anatomy.html#inline-r-code"><i class="fa fa-check"></i><b>B.5.6</b> Inline R code</a></li>
</ul></li>
<li class="chapter" data-level="B.6" data-path="tips_tricks.html"><a href="tips_tricks.html"><i class="fa fa-check"></i><b>B.6</b> Some tips and tricks</a></li>
<li class="chapter" data-level="B.7" data-path="further-information.html"><a href="further-information.html"><i class="fa fa-check"></i><b>B.7</b> Further Information</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="github_r.html"><a href="github_r.html"><i class="fa fa-check"></i><b>C</b> Version control with Git and GitHub</a>
<ul>
<li class="chapter" data-level="C.1" data-path="what-is-version-control.html"><a href="what-is-version-control.html"><i class="fa fa-check"></i><b>C.1</b> What is version control?</a></li>
<li class="chapter" data-level="C.2" data-path="why-use-version-control.html"><a href="why-use-version-control.html"><i class="fa fa-check"></i><b>C.2</b> Why use version control?</a></li>
<li class="chapter" data-level="C.3" data-path="what-is-git-and-github.html"><a href="what-is-git-and-github.html"><i class="fa fa-check"></i><b>C.3</b> What is Git and GitHub?</a></li>
<li class="chapter" data-level="C.4" data-path="setup_git.html"><a href="setup_git.html"><i class="fa fa-check"></i><b>C.4</b> Getting started</a>
<ul>
<li class="chapter" data-level="C.4.1" data-path="setup_git.html"><a href="setup_git.html#install-git"><i class="fa fa-check"></i><b>C.4.1</b> Install Git</a></li>
<li class="chapter" data-level="C.4.2" data-path="setup_git.html"><a href="setup_git.html#configure-git"><i class="fa fa-check"></i><b>C.4.2</b> Configure Git</a></li>
<li class="chapter" data-level="C.4.3" data-path="setup_git.html"><a href="setup_git.html#rs_config"><i class="fa fa-check"></i><b>C.4.3</b> Configure RStudio</a></li>
<li class="chapter" data-level="C.4.4" data-path="setup_git.html"><a href="setup_git.html#register-a-github-account"><i class="fa fa-check"></i><b>C.4.4</b> Register a GitHub account</a></li>
</ul></li>
<li class="chapter" data-level="C.5" data-path="setting-up-a-project-in-rstudio.html"><a href="setting-up-a-project-in-rstudio.html"><i class="fa fa-check"></i><b>C.5</b> Setting up a project in RStudio</a>
<ul>
<li class="chapter" data-level="C.5.1" data-path="setting-up-a-project-in-rstudio.html"><a href="setting-up-a-project-in-rstudio.html#opt1"><i class="fa fa-check"></i><b>C.5.1</b> Option 1 - GitHub first</a></li>
<li class="chapter" data-level="C.5.2" data-path="setting-up-a-project-in-rstudio.html"><a href="setting-up-a-project-in-rstudio.html#opt2"><i class="fa fa-check"></i><b>C.5.2</b> Option 2 - RStudio first</a></li>
</ul></li>
<li class="chapter" data-level="C.6" data-path="use_git.html"><a href="use_git.html"><i class="fa fa-check"></i><b>C.6</b> Using Git</a>
<ul>
<li class="chapter" data-level="C.6.1" data-path="use_git.html"><a href="use_git.html#tracking-changes"><i class="fa fa-check"></i><b>C.6.1</b> Tracking changes</a></li>
<li class="chapter" data-level="C.6.2" data-path="use_git.html"><a href="use_git.html#commit-history"><i class="fa fa-check"></i><b>C.6.2</b> Commit history</a></li>
<li class="chapter" data-level="C.6.3" data-path="use_git.html"><a href="use_git.html#undo"><i class="fa fa-check"></i><b>C.6.3</b> Reverting changes</a></li>
<li class="chapter" data-level="C.6.4" data-path="use_git.html"><a href="use_git.html#collab"><i class="fa fa-check"></i><b>C.6.4</b> Collaborate with Git</a></li>
<li class="chapter" data-level="C.6.5" data-path="use_git.html"><a href="use_git.html#git-tips"><i class="fa fa-check"></i><b>C.6.5</b> Git tips</a></li>
</ul></li>
<li class="chapter" data-level="C.7" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>C.7</b> Further resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="loops" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Loops<a href="loops.html#loops" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R is very good at performing repetitive tasks. If we want a set of operations to be repeated several times we use what’s known as a loop. When you create a loop, R will execute the instructions in the loop a specified number of times or until a specified condition is met. There are three main types of loop in R: the <em>for</em> loop, the <em>while</em> loop and the <em>repeat</em> loop.</p>
<p>Loops are one of the staples of all programming languages, not just R, and can be a powerful tool (although in our opinion, used far too frequently when writing R code).</p>
<div id="for-loop" class="section level3 hasAnchor" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> For loop<a href="loops.html#for-loop" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The most commonly used loop structure when you want to repeat a task a defined number of times is the <code>for</code> loop.
The most basic example of a <code>for</code> loop is:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="loops.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb217-2"><a href="loops.html#cb217-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb217-3"><a href="loops.html#cb217-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb217-4"><a href="loops.html#cb217-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb217-5"><a href="loops.html#cb217-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span>
<span id="cb217-6"><a href="loops.html#cb217-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3</span></span>
<span id="cb217-7"><a href="loops.html#cb217-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4</span></span>
<span id="cb217-8"><a href="loops.html#cb217-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 5</span></span></code></pre></div>
<p>But what’s the code actually doing? This is a dynamic bit of code were an index <code>i</code> is iteratively replaced by each value in the vector <code>1:5</code>. Let’s break it down. Because the first value in our sequence (<code>1:5</code>) is <code>1</code>, the loop starts by replacing <code>i</code> with <code>1</code> and runs everything between the <code>{ }</code>. Loops conventionally use <code>i</code> as the counter, short for iteration, but you are free to use whatever you like, even your pet’s name, it really does not matter (except when using nested loops, in which case the counters must be called different things, like <code>SenorWhiskers</code> and <code>HerrFlufferkins</code>.</p>
<p>So, if we were to do the first iteration of the loop manually</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="loops.html#cb218-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb218-2"><a href="loops.html#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(i)</span>
<span id="cb218-3"><a href="loops.html#cb218-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span></code></pre></div>
<p>Once this first iteration is complete, the for loop <em>loops</em> back to the beginning and replaces <code>i</code> with the next value in our <code>1:5</code> sequence (<code>2</code> in this case):</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="loops.html#cb219-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb219-2"><a href="loops.html#cb219-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(i)</span>
<span id="cb219-3"><a href="loops.html#cb219-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span></code></pre></div>
<p>This process is then repeated until the loop reaches the final value in the sequence (<code>5</code> in this example) after which point it stops.</p>
<p>To reinforce how <code>for</code> loops work and introduce you to a valuable feature of loops, we’ll alter our counter within the loop. This can be used, for example, if we’re using a loop to iterate through a vector but want to select the next row (or any other value). To show this we’ll simply add 1 to the value of our index every time we iterate our loop.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="loops.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb220-2"><a href="loops.html#cb220-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb220-3"><a href="loops.html#cb220-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb220-4"><a href="loops.html#cb220-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span>
<span id="cb220-5"><a href="loops.html#cb220-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3</span></span>
<span id="cb220-6"><a href="loops.html#cb220-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4</span></span>
<span id="cb220-7"><a href="loops.html#cb220-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 5</span></span>
<span id="cb220-8"><a href="loops.html#cb220-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 6</span></span></code></pre></div>
<p>As in the previous loop, the first value in our sequence is 1. The loop begins by replacing <code>i</code> with <code>1</code>, but this time we’ve specified that a value of <code>1</code> must be added to <code>i</code> in the expression resulting in a value of <code>1 + 1</code>.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="loops.html#cb221-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb221-2"><a href="loops.html#cb221-2" aria-hidden="true" tabindex="-1"></a>i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb221-3"><a href="loops.html#cb221-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span></code></pre></div>
<p>As before, once the iteration is complete, the loop moves onto the next value in the sequence and replaces <code>i</code> with the next value (<code>2</code> in this case) so that <code>i + 1</code> becomes <code>2 + 1</code>.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="loops.html#cb222-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb222-2"><a href="loops.html#cb222-2" aria-hidden="true" tabindex="-1"></a>i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb222-3"><a href="loops.html#cb222-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3</span></span></code></pre></div>
<p>And so on. We think you get the idea! In essence this is all a <code>for</code> loop is doing and nothing more.</p>
<p>Whilst above we have been using simple addition in the body of the loop, you can also combine loops with functions.</p>
<p>Let’s go back to our data frame <code>city</code>. Previously in the Chapter we created a function to multiply two columns and used it to create our <code>porto_aberdeen</code>, <code>aberdeen_nairobi</code>, and <code>nairobi_genoa</code> objects. We could have used a loop for this. Let’s remind ourselves what our data look like and the code for the <code>multiple_columns()</code> function.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="loops.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recreating our dataset</span></span>
<span id="cb223-2"><a href="loops.html#cb223-2" aria-hidden="true" tabindex="-1"></a>city <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb223-3"><a href="loops.html#cb223-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">porto =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>),</span>
<span id="cb223-4"><a href="loops.html#cb223-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">aberdeen =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>),</span>
<span id="cb223-5"><a href="loops.html#cb223-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">nairobi =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">10</span>), <span class="fu">rnorm</span>(<span class="dv">90</span>)),</span>
<span id="cb223-6"><a href="loops.html#cb223-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">genoa =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>)</span>
<span id="cb223-7"><a href="loops.html#cb223-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb223-8"><a href="loops.html#cb223-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-9"><a href="loops.html#cb223-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Our function</span></span>
<span id="cb223-10"><a href="loops.html#cb223-10" aria-hidden="true" tabindex="-1"></a>multiply_columns <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb223-11"><a href="loops.html#cb223-11" aria-hidden="true" tabindex="-1"></a>  temp <span class="ot">&lt;-</span> x <span class="sc">*</span> y</span>
<span id="cb223-12"><a href="loops.html#cb223-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">is.na</span>(temp))) {</span>
<span id="cb223-13"><a href="loops.html#cb223-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">warning</span>(<span class="st">&quot;The function has produced NAs&quot;</span>)</span>
<span id="cb223-14"><a href="loops.html#cb223-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(temp)</span>
<span id="cb223-15"><a href="loops.html#cb223-15" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb223-16"><a href="loops.html#cb223-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(temp)</span>
<span id="cb223-17"><a href="loops.html#cb223-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb223-18"><a href="loops.html#cb223-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>To use a list to iterate over these columns we need to first create an empty list (remember <a href="data-structures.html#lists">lists</a>?) which we call <code>temp</code> (short for temporary) which will be used to store the output of the <code>for</code> loop.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="loops.html#cb224-1" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb224-2"><a href="loops.html#cb224-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>(<span class="fu">ncol</span>(city) <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb224-3"><a href="loops.html#cb224-3" aria-hidden="true" tabindex="-1"></a>  temp[[i]] <span class="ot">&lt;-</span> <span class="fu">multiply_columns</span>(<span class="at">x =</span> city[, i], <span class="at">y =</span> city[, i <span class="sc">+</span> <span class="dv">1</span>])</span>
<span id="cb224-4"><a href="loops.html#cb224-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb224-5"><a href="loops.html#cb224-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Warning in multiply_columns(x = city[, i], y = city[, i + 1]): The function has</span></span>
<span id="cb224-6"><a href="loops.html#cb224-6" aria-hidden="true" tabindex="-1"></a><span class="do">## produced NAs</span></span>
<span id="cb224-7"><a href="loops.html#cb224-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-8"><a href="loops.html#cb224-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Warning in multiply_columns(x = city[, i], y = city[, i + 1]): The function has</span></span>
<span id="cb224-9"><a href="loops.html#cb224-9" aria-hidden="true" tabindex="-1"></a><span class="do">## produced NAs</span></span></code></pre></div>
<p>When we specify our <code>for</code> loop notice how we subtracted 1 from <code>ncol(city)</code>. The <code>ncol()</code> function returns the number of columns in our <code>city</code> data frame which is <code>4</code> and so our loop runs from <code>i = 1</code> to <code>i = 4 - 1</code> which is <code>i = 3</code>. We’ll come back to why we need to subtract 1 from this in a minute.</p>
<p>So in the first iteration of the loop <code>i</code> takes on the value <code>1</code>. The <code>multiply_columns()</code> function multiplies the <code>city[, 1]</code> (<code>porto</code>) and <code>city[, 1 + 1]</code> (<code>aberdeen</code>) columns and stores it in the <code>temp[[1]]</code> which is the first element of the <code>temp</code> list.</p>
<p>The second iteration of the loop <code>i</code> takes on the value <code>2</code>. The <code>multiply_columns()</code> function multiplies the <code>city[, 2]</code> (<code>aberdeen</code>) and <code>city[, 2 + 1]</code> (<code>nairobi</code>) columns and stores it in the <code>temp[[2]]</code> which is the second element of the <code>temp</code> list.</p>
<p>The third and final iteration of the loop <code>i</code> takes on the value <code>3</code>. The <code>multiply_columns()</code> function multiplies the <code>city[, 3]</code> (<code>nairobi</code>) and <code>city[, 3 + 1]</code> (<code>genoa</code>) columns and stores it in the <code>temp[[3]]</code> which is the third element of the <code>temp</code> list.</p>
<p>So can you see why we used <code>ncol(city) - 1</code> when we first set up our loop? As we have four columns in our <code>city</code> data frame if we didn’t use <code>ncol(city) - 1</code> then eventually we’d try to add the 4<sup>th</sup> column with the non-existent 5<sup>th</sup> column.</p>
<p>Again, it’s a good idea to test that we are getting something sensible from our loop (remember, check, check and check again!). To do this we can use the <code>identical()</code> function to compare the variables we created <code>by hand</code> with each iteration of the loop manually.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="loops.html#cb225-1" aria-hidden="true" tabindex="-1"></a>porto_aberdeen_func <span class="ot">&lt;-</span> <span class="fu">multiply_columns</span>(city<span class="sc">$</span>porto, city<span class="sc">$</span>aberdeen)</span>
<span id="cb225-2"><a href="loops.html#cb225-2" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb225-3"><a href="loops.html#cb225-3" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(<span class="fu">multiply_columns</span>(city[, i], city[, i <span class="sc">+</span> <span class="dv">1</span>]), porto_aberdeen_func)</span>
<span id="cb225-4"><a href="loops.html#cb225-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb225-5"><a href="loops.html#cb225-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-6"><a href="loops.html#cb225-6" aria-hidden="true" tabindex="-1"></a>aberdeen_nairobi_func <span class="ot">&lt;-</span> <span class="fu">multiply_columns</span>(city<span class="sc">$</span>aberdeen, city<span class="sc">$</span>nairobi)</span>
<span id="cb225-7"><a href="loops.html#cb225-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Warning in multiply_columns(city$aberdeen, city$nairobi): The function has</span></span>
<span id="cb225-8"><a href="loops.html#cb225-8" aria-hidden="true" tabindex="-1"></a><span class="do">## produced NAs</span></span>
<span id="cb225-9"><a href="loops.html#cb225-9" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb225-10"><a href="loops.html#cb225-10" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(<span class="fu">multiply_columns</span>(city[, i], city[, i <span class="sc">+</span> <span class="dv">1</span>]), aberdeen_nairobi_func)</span>
<span id="cb225-11"><a href="loops.html#cb225-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Warning in multiply_columns(city[, i], city[, i + 1]): The function has produced</span></span>
<span id="cb225-12"><a href="loops.html#cb225-12" aria-hidden="true" tabindex="-1"></a><span class="do">## NAs</span></span>
<span id="cb225-13"><a href="loops.html#cb225-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span></code></pre></div>
<p>If you can follow the examples above, you’ll be in a good spot to begin writing some of your own for loops. That said there are other types of loops available to you.</p>
</div>
<div id="while-loop" class="section level3 hasAnchor" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> While loop<a href="loops.html#while-loop" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another type of loop that you may use (albeit less frequently) is the <code>while</code> loop. The <code>while</code> loop is used when you want to keep looping until a specific logical condition is satisfied (contrast this with the <code>for</code> loop which will always iterate through an entire sequence).</p>
<p>The basic structure of the while loop is:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="loops.html#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span>(logical_condition){ expression }</span></code></pre></div>
<p>A simple example of a while loop is:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="loops.html#cb227-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb227-2"><a href="loops.html#cb227-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;=</span> <span class="dv">4</span>) {</span>
<span id="cb227-3"><a href="loops.html#cb227-3" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb227-4"><a href="loops.html#cb227-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb227-5"><a href="loops.html#cb227-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb227-6"><a href="loops.html#cb227-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb227-7"><a href="loops.html#cb227-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span>
<span id="cb227-8"><a href="loops.html#cb227-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3</span></span>
<span id="cb227-9"><a href="loops.html#cb227-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4</span></span>
<span id="cb227-10"><a href="loops.html#cb227-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 5</span></span></code></pre></div>
<p>Here the loop will only continue to pass values to the main body of the loop (the <code>expression</code> body) when <code>i</code> is less than or equal to 4 (specified using the <code>&lt;=</code> operator in this example). Once <code>i</code> is greater than 4 the loop will stop.</p>
<p>There is another, very rarely used type of loop; the <code>repeat</code> loop. The <code>repeat</code> loop has no conditional check so can keep iterating indefinitely (meaning a break, or “stop here”, has to be coded into it). It’s worthwhile being aware of it’s existence, but for now we don’t think you need to worry about it; the <code>for</code> and <code>while</code> loops will see you through the vast majority of your looping needs.</p>
</div>
<div id="when-to-use-a-loop" class="section level3 hasAnchor" number="6.4.3">
<h3><span class="header-section-number">6.4.3</span> When to use a loop?<a href="loops.html#when-to-use-a-loop" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Loops are fairly commonly used, though sometimes a little overused in our opinion. Equivalent tasks can be performed with functions, which are often more efficient than loops. Though this raises the question when should you use a loop?</p>
<p>In general loops are implemented inefficiently in R and should be avoided when better alternatives exist (e.g. vectorised functions), especially when you’re working with large datasets. However, loop are sometimes the only way to achieve the result we want.</p>
<p><strong>Some examples of when using loops can be appropriate:</strong></p>
<ul>
<li><p>Some simulations.</p></li>
<li><p>Recursive relationships (a relationship which depends on the value of the previous relationship [“to understand recursion, you must understand recursion”])</p></li>
<li><p>More complex problems that are not easily amenable to functions.</p></li>
<li><p>While loops (keep jumping until you’ve reached the moon)</p></li>
</ul>
</div>
<div id="if-not-loops-then-what" class="section level3 hasAnchor" number="6.4.4">
<h3><span class="header-section-number">6.4.4</span> If not loops, then what?<a href="loops.html#if-not-loops-then-what" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The pattern of looping over a vector, doing something to each element and saving the results is so common that the <code>purrr</code> package (part of tidyverse) provides a family of functions to do it for you. These are <code>map_*</code> functions.</p>
<p>For example, column wise summaries of cities data can be created as</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="loops.html#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dfr</span>(city, <span class="cf">function</span>(x){<span class="fu">summary</span>(x)})</span></code></pre></div>
<pre><code>## # A tibble: 4 × 7
##   Min.      `1st Qu.`  Median      Mean         `3rd Qu.` Max.     `NA&#39;s` 
##   &lt;table&gt;   &lt;table&gt;    &lt;table&gt;     &lt;table&gt;      &lt;table&gt;   &lt;table&gt;  &lt;table&gt;
## 1 -3.281362 -0.7580670 -0.09221508 -0.041098543 0.6769474 2.386683 NA     
## 2 -2.488330 -0.8160216 -0.06276359 -0.083801719 0.4851634 2.530844 NA     
## 3 -3.189245 -0.9550408 -0.24572891 -0.205044862 0.6328455 3.010478 10     
## 4 -2.407874 -0.6904893  0.01923070  0.006420597 0.6981329 2.849795 NA</code></pre>
<p>Note that data frame is just a list, where columns are elements. To see this, use the <code>[[</code> function on the list.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="loops.html#cb230-1" aria-hidden="true" tabindex="-1"></a>city[[<span class="st">&quot;porto&quot;</span>]]</span></code></pre></div>
<p><code>summary</code> is operating on each element of the list and creates a vector (more specifically with named number) as requested by <code>map</code>. The <code>dfr</code> is a call to return a data frame created by row-binding. This require dplyr to be installed.</p>
<p>You could have done the same thing with</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="loops.html#cb231-1" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> <span class="cn">NULL</span> <span class="co"># Initialise a null data frame.</span></span>
<span id="cb231-2"><a href="loops.html#cb231-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-3"><a href="loops.html#cb231-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(city)){</span>
<span id="cb231-4"><a href="loops.html#cb231-4" aria-hidden="true" tabindex="-1"></a>    temp[[i]] <span class="ot">&lt;-</span> <span class="fu">summary</span>(city[,i]) <span class="sc">%&gt;%</span> <span class="fu">t</span>() <span class="co"># Need the transpose (t) to convert a vector into a row in a data frame.</span></span>
<span id="cb231-5"><a href="loops.html#cb231-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb231-6"><a href="loops.html#cb231-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-7"><a href="loops.html#cb231-7" aria-hidden="true" tabindex="-1"></a>plyr<span class="sc">::</span><span class="fu">ldply</span>(temp) <span class="co">#Shortcut to use rowbinding and filling missing columns.</span></span></code></pre></div>
<pre><code>##        Min.    1st Qu.      Median         Mean   3rd Qu.     Max. NA&#39;s
## 1 -3.281362 -0.7580670 -0.09221508 -0.041098543 0.6769474 2.386683   NA
## 2 -2.488330 -0.8160216 -0.06276359 -0.083801719 0.4851634 2.530844   NA
## 3 -3.189245 -0.9550408 -0.24572891 -0.205044862 0.6328455 3.010478   10
## 4 -2.407874 -0.6904893  0.01923070  0.006420597 0.6981329 2.849795   NA</code></pre>
<p>There is no real speed advantage of using <code>map</code> functions over <code>for</code> loops. It just makes the code more readable. A strategy to have in the back of your mind which may be useful is; for every loop you make, try to remake it using an <code>map</code> function (or <code>lapply</code> or <code>sapply</code> in base R will work). There’s nothing worse than realising there was a small, tiny, seemingly meaningless mistake in a loop which weeks, months or years down the line has propagated into a huge mess. We strongly recommend trying to use the apply functions whenever possible.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="combining-logical-operators.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exercise-6.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/nkaza/intro2Rbook/edit/master/06-programming.Rmd",
"text": "Suggest an edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["Rbook.pdf", "Download PDF version"]],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"highlight": "tango"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
